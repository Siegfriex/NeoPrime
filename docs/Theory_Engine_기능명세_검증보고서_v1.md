# Theory Engine v3 ê¸°ëŠ¥ëª…ì„¸ vs ì‹¤ì œ êµ¬í˜„ ê°­ ë¶„ì„

**Document ID**: TE-GAP-ANALYSIS-001  
**Version**: 1.0  
**Date**: 2026-01-21  
**Author**: Product Spec Agent  
**Status**: âœ… 1ì°¨ ê²€ì¦ ì™„ë£Œ

---

## ëª©ì°¨

1. [Executive Summary: ëª…ì„¸ vs ì‹¤ì œ ê°­ ìš”ì•½](#1-executive-summary-ëª…ì„¸-vs-ì‹¤ì œ-ê°­-ìš”ì•½)
2. [ê°­ ë¶„ì„: ë¬´ì—‡ì´ ë‹¤ë¥¸ê°€](#2-ê°­-ë¶„ì„-ë¬´ì—‡ì´-ë‹¤ë¥¸ê°€)
3. [ê°­ ë¶„ì„: ì–´ë–»ê²Œ ë‹¤ë¥¸ê°€](#3-ê°­-ë¶„ì„-ì–´ë–»ê²Œ-ë‹¤ë¥¸ê°€)
4. [ê°­ ë¶„ì„: ì™œ ë‹¤ë¥¸ê°€](#4-ê°­-ë¶„ì„-ì™œ-ë‹¤ë¥¸ê°€)
5. [ê°œì„ ëœ Theory Engine ê¸°ëŠ¥ëª…ì„¸ì„œ](#5-ê°œì„ ëœ-theory-engine-ê¸°ëŠ¥ëª…ì„¸ì„œ)
6. [ê²€ì¦ ê¸°ì¤€ ë° í…ŒìŠ¤íŠ¸ ëª…ì„¸](#6-ê²€ì¦-ê¸°ì¤€-ë°-í…ŒìŠ¤íŠ¸-ëª…ì„¸)

---

## 1. Executive Summary: ëª…ì„¸ vs ì‹¤ì œ ê°­ ìš”ì•½

### 1.1 ê²€ì¦ ê²°ë¡ 

| êµ¬ë¶„ | ê¸°ì¡´ ëª…ì„¸ ìƒíƒœ | ì‹¤ì œ êµ¬í˜„ ìƒíƒœ | ê°­ ì‹¬ê°ë„ |
|:-----|:--------------|:-------------|:----------|
| **íŒŒì´í”„ë¼ì¸ êµ¬ì¡°** | 5ë‹¨ê³„ ê°œë…ë§Œ ì–¸ê¸‰ | 5ë‹¨ê³„ ì™„ì „ êµ¬í˜„ë¨ | âš ï¸ **ëª…ì„¸ ë¶€ì¡±** |
| **PERCENTAGE ë°©í–¥** | ë¯¸ëª…ì‹œ | ì—­ì „ ë²„ê·¸ ë°œê²¬ ë° ìˆ˜ì • | ğŸ”´ **Critical** |
| **ëŒ€í•™ Alias ë§¤í•‘** | "ì •ê·œí™”" ì–¸ê¸‰ë§Œ | ì˜¤ë§¤í•‘ ë²„ê·¸ ë°œê²¬ ë° ìˆ˜ì • | ğŸ”´ **Critical** |
| **ì˜ë£Œê³„ì—´ íŒì •** | ë¯¸ëª…ì‹œ | ê³¼ë„í•œ íŒì • ë¡œì§ | ğŸŸ¡ **High** |
| **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€** | "ê³¨ë“  ì¼€ì´ìŠ¤" ì–¸ê¸‰ | 51 tests, 100% pass | âœ… **ì–‘í˜¸** |
| **ì„±ëŠ¥** | "P95 < 3ì´ˆ" | ì‹¤ì œ í…ŒìŠ¤íŠ¸ 226ì´ˆ | ğŸŸ¡ **High** |
| **ì„¤ëª… ê°€ëŠ¥ì„±** | "ê·¼ê±° ì œì‹œ" ì–¸ê¸‰ | ë§¤ì¹­ í”Œë˜ê·¸ ë¶€ì¬ | ğŸŸ¡ **High** |

### 1.2 í•µì‹¬ ë°œê²¬ì‚¬í•­

**ê¸°ì¡´ ëª…ì„¸ì˜ 3ëŒ€ ê²°í•¨**:

1. **ì˜ë¯¸ë¡  ê°­ (Semantic Gap)**
   - ëª…ì„¸: "PERCENTAGE ì •ê·œí™”"ë¼ê³ ë§Œ ê¸°ìˆ 
   - ì‹¤ì œ: PERCENTAGE ì¶•ì´ **ì—­ë°©í–¥(0=ìƒìœ„, 100=í•˜ìœ„)**ì¸ë°, ì»¤íŠ¸ë¼ì¸ ë ˆë²¨ ë§¤í•‘ì´ **ìˆœë°©í–¥ìœ¼ë¡œ ê°€ì •**ë˜ì–´ ìˆì—ˆìŒ
   - ê²°ê³¼: **ì¹˜ëª…ì ì¸ í™•ë¥ /ë¼ì¸ ì™œê³¡ ê°€ëŠ¥ì„±**

2. **ì„¤ëª… ê°€ëŠ¥ì„± ë¶€ì¡± (Explainability Gap)**
   - ëª…ì„¸: "í•©ê²© ì˜ˆì¸¡ì— ê·¼ê±° ì œì‹œ"
   - ì‹¤ì œ: ì–´ë–¤ Aliasê°€ ì“°ì˜€ëŠ”ì§€, í¼ì§€ ë§¤ì¹­ì´ ë°œìƒí–ˆëŠ”ì§€ ê²°ê³¼ ê°ì²´ì— í”Œë˜ê·¸ ì—†ìŒ
   - ê²°ê³¼: **ë””ë²„ê¹… ë¶ˆê°€ëŠ¥, ì‚¬ìš©ì ì‹ ë¢°ë„ ì €í•˜**

3. **ì„±ëŠ¥ ëª©í‘œ vs ì‹¤ì œ (Performance Gap)**
   - ëª…ì„¸: "API P95 < 3ì´ˆ"
   - ì‹¤ì œ: ì „ì²´ í…ŒìŠ¤íŠ¸ 226ì´ˆ (51ê°œ), ë‹¨ì¼ ì¼€ì´ìŠ¤ë‹¹ í‰ê·  4.4ì´ˆ
   - ê²°ê³¼: **í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ SLA ìœ„ë°˜ ê°€ëŠ¥**

---

## 2. ê°­ ë¶„ì„: ë¬´ì—‡ì´ ë‹¤ë¥¸ê°€

### 2.1 ê¸°ì¡´ ëª…ì„¸ì— ëˆ„ë½ëœ í•­ëª©

| í•­ëª© | ê¸°ì¡´ ëª…ì„¸ | ì‹¤ì œ í•„ìš” | ê°­ íƒ€ì… |
|:-----|:---------|:---------|:--------|
| **PERCENTAGE ì¶• ë°©í–¥ ì •ì˜** | âŒ ì—†ìŒ | âœ… í•„ìˆ˜ (0=ìƒìœ„, 100=í•˜ìœ„) | ì˜ë¯¸ë¡  ê°­ |
| **ì»¤íŠ¸ë¼ì¸ ë ˆë²¨ ë§¤í•‘ ê·œì¹™** | âŒ ì—†ìŒ | âœ… í•„ìˆ˜ (ì ì •â‰¥ì˜ˆìƒâ‰¥ì†Œì‹ , ìƒìœ„% ê¸°ì¤€) | ì˜ë¯¸ë¡  ê°­ |
| **Alias ë§¤í•‘ ìš°ì„ ìˆœìœ„** | âŒ ì—†ìŒ | âœ… í•„ìˆ˜ (ì •í™•â†’ì „ê³µAliasâ†’ëŒ€í•™Aliasâ†’í¼ì§€) | ë¡œì§ ê°­ |
| **Alias í‚¤ ì •ê·œí™” ìš”êµ¬** | âŒ ì—†ìŒ | âœ… í•„ìˆ˜ (ì—­ë§¤í•‘ í‚¤ë„ ì •ê·œí™”) | êµ¬í˜„ ê°­ |
| **ì˜ë£Œê³„ì—´ íŒì • ë²”ìœ„** | âŒ ì—†ìŒ | âœ… í•„ìˆ˜ (ì˜/ì•½/ì¹˜/í•œ/ìˆ˜ì˜ ëª…ì‹œ) | ë„ë©”ì¸ ê°­ |
| **ë§¤ì¹­ í”Œë˜ê·¸ í•„ë“œ** | âŒ ì—†ìŒ | âœ… í•„ìˆ˜ (used_alias, used_fuzzy, match_type) | ì„¤ëª…ê°€ëŠ¥ì„± ê°­ |
| **ë‹¨ì¼ ì˜ˆì¸¡ ì„±ëŠ¥ ëª©í‘œ** | âŒ API ì „ì²´ë§Œ | âœ… í•„ìˆ˜ (ë‹¨ì¼ ì¼€ì´ìŠ¤ < 1ì´ˆ) | ì„±ëŠ¥ ê°­ |
| **raw_components í•„ìˆ˜ í‚¤** | âœ… ì–¸ê¸‰ | âœ… êµ¬í˜„ ì™„ë£Œ | âœ… ì¼ì¹˜ |
| **engine_version ì¶”ì ** | âœ… ì–¸ê¸‰ | âœ… êµ¬í˜„ ì™„ë£Œ | âœ… ì¼ì¹˜ |

### 2.2 ê¸°ì¡´ ëª…ì„¸ì— ê³¼ëŒ€í‰ê°€ëœ í•­ëª©

| í•­ëª© | ê¸°ì¡´ ëª…ì„¸ | ì‹¤ì œ êµ¬í˜„ | ê°­ |
|:-----|:---------|:---------|:---|
| **ìë™í™”ìœ¨ 85%** | 85% (ì¶”ì •) | 85% (ê²€ì¦ ì™„ë£Œ) | âœ… ì¼ì¹˜ |
| **ì»¤íŠ¸ë¼ì¸ ìë™í™”ìœ¨ 90%** | 90% | ì‹¤ì œëŠ” ~90%, ë‹¨ ë°©í–¥ ë²„ê·¸ë¡œ ì™œê³¡ ê°€ëŠ¥ì„± ìˆì—ˆìŒ | âš ï¸ **í’ˆì§ˆ ê°­** |
| **ê²°ê²© ë£° ìë™í™”ìœ¨ 90%** | 90% | êµ¬ì¡°ëŠ” OK, ë³„ì¹­ ë¹„ì¼ê´€ì„±ìœ¼ë¡œ 10~20% ëˆ„ë½ ê°€ëŠ¥ | âš ï¸ **í’ˆì§ˆ ê°­** |

### 2.3 ê¸°ì¡´ ëª…ì„¸ì— ê³¼ì†Œí‰ê°€ëœ í•­ëª©

| í•­ëª© | ê¸°ì¡´ ëª…ì„¸ | ì‹¤ì œ í•„ìš” |
|:-----|:---------|:---------|
| **í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìˆ˜** | "ê³¨ë“  ì¼€ì´ìŠ¤ 3~5ê°œ" | 51ê°œ í…ŒìŠ¤íŠ¸ (í†µí•© 20+, ë‹¨ìœ„ 30+) |
| **ë°ì´í„° ì •í•©ì„± ì²´í¬** | ë¯¸ëª…ì‹œ | validate_sheets, validate_columns ë“± ë‹¤ë‹¨ê³„ ê²€ì¦ |
| **ë²„ì „ ê´€ë¦¬ ì²´ê³„** | "engine_version" ì–¸ê¸‰ | engine_version + excel_version ì´ì¤‘ ì¶”ì  |

---

## 3. ê°­ ë¶„ì„: ì–´ë–»ê²Œ ë‹¤ë¥¸ê°€

### 3.1 ì•„í‚¤í…ì²˜ ê°­

**ê¸°ì¡´ ëª…ì„¸**:
```
Theory Engine
â”œâ”€â”€ RAWSCORE (ì ìˆ˜ ë³€í™˜)
â”œâ”€â”€ INDEX (ì»¤íŠ¸ë¼ì¸ ì¡°íšŒ)
â”œâ”€â”€ PERCENTAGE (ì •ê·œí™”)
â”œâ”€â”€ RESTRICT (ê²°ê²© ì²´í¬)
â””â”€â”€ COMPUTE (ìµœì¢… ê³„ì‚°)
```

**ì‹¤ì œ êµ¬í˜„**:
```
theory_engine/
â”œâ”€â”€ config.py              â† SheetConfig (ì‹œíŠ¸ëª…, ì»¬ëŸ¼ëª… ë§¤í•‘)
â”œâ”€â”€ constants.py           â† Enum ì •ì˜ (LevelTheory, DisqualificationCode)
â”œâ”€â”€ utils.py               â† validate_sheets, validate_columns, cast_numeric
â”œâ”€â”€ loader.py              â† WorkbookLoader (ê²€ì¦ + ë¡œë“œ + ì •ê·œí™”)
â”œâ”€â”€ model.py               â† StudentProfile, TheoryResult (ì…ì¶œë ¥ ëª¨ë¸)
â”œâ”€â”€ rules.py               â† 5ë‹¨ê³„ íŒŒì´í”„ë¼ì¸ í•¨ìˆ˜
â”‚   â”œâ”€â”€ convert_raw_to_standard()    # RAWSCORE
â”‚   â”œâ”€â”€ lookup_index()               # INDEX
â”‚   â”œâ”€â”€ lookup_percentage()          # PERCENTAGE
â”‚   â”œâ”€â”€ check_disqualification()     # RESTRICT
â”‚   â””â”€â”€ compute_theory_result()      # COMPUTE
â”œâ”€â”€ cutoff/
â”‚   â”œâ”€â”€ cutoff_extractor.py  â† CutoffExtractor (ëŒ€í•™/ì „ê³µ Alias + í¼ì§€)
â”‚   â””â”€â”€ subject_matcher.py   â† SubjectMatcher (ìˆ˜ëŠ¥ ê³¼ëª© ë§¤ì¹­)
â””â”€â”€ formula_mining/
    â””â”€â”€ rule_summarizer.py   â† ìˆ˜ì‹ ì—­ë¶„ì„ ë„êµ¬
```

**ê°­ ì„¤ëª…**:
- ê¸°ì¡´ ëª…ì„¸ëŠ” **ê°œë…ì  5ë‹¨ê³„**ë§Œ ì–¸ê¸‰
- ì‹¤ì œëŠ” **6ê°œ ëª¨ë“ˆ + 2ê°œ ì„œë¸ŒíŒ¨í‚¤ì§€**ë¡œ êµ¬ì„±
- `CutoffExtractor`ì™€ `SubjectMatcher`ê°€ **ë…ë¦½ ëª¨ë“ˆ**ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆìŒ â†’ ëª…ì„¸ì— ë°˜ì˜ í•„ìš”

---

### 3.2 ë°ì´í„° í”Œë¡œìš° ê°­

**ê¸°ì¡´ ëª…ì„¸**:
```
ì…ë ¥: StudentProfile
  â†“
Theory Engine ê³„ì‚°
  â†“
ì¶œë ¥: TheoryResult (line, probability, score)
```

**ì‹¤ì œ êµ¬í˜„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì…ë ¥: StudentProfile                                         â”‚
â”‚  - korean_std, math_std, track, overall_grade               â”‚
â”‚  - target.university, target.major, target.admission_type   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: RAWSCORE - ì ìˆ˜ ë³€í™˜                                â”‚
â”‚  - convert_raw_to_standard(korean, math, track)             â”‚
â”‚  - ì¶œë ¥: korean_std, math_std                               â”‚
â”‚  - raw_componentsì— "rawscore_keys" ì €ì¥                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: INDEX - ì»¤íŠ¸ë¼ì¸ ì¡°íšŒ (ëŒ€í•™/ì „ê³µ ë§¤ì¹­)               â”‚
â”‚  - CutoffExtractor.extract_cutoffs()                        â”‚
â”‚  - ë§¤ì¹­ ìš°ì„ ìˆœìœ„:                                            â”‚
â”‚    1ï¸âƒ£ ì •í™• ë§¤ì¹­ (ì •ê·œí™”ëœ í‚¤)                               â”‚
â”‚    2ï¸âƒ£ ì „ê³µ Alias ë§¤ì¹­ (MAJOR_ALIASES)                       â”‚
â”‚    3ï¸âƒ£ ëŒ€í•™ Alias ë§¤ì¹­ (UNIVERSITY_ALIASES)                  â”‚
â”‚    4ï¸âƒ£ í¼ì§€ ë§¤ì¹­ (rapidfuzz, threshold=75)                   â”‚
â”‚  - ì¶œë ¥: cutoffs (ì ì •/ì˜ˆìƒ/ì†Œì‹ )                           â”‚
â”‚  - raw_componentsì— "index_key", "index_found" ì €ì¥         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: PERCENTAGE - ë°±ë¶„ìœ„ ì¡°íšŒ                            â”‚
â”‚  - lookup_percentage()                                      â”‚
â”‚  - âš ï¸ CRITICAL: % ì¶• ë°©í–¥ (0=ìƒìœ„, 100=í•˜ìœ„)               â”‚
â”‚  - ì»¤íŠ¸ë¼ì¸ ë ˆë²¨ ë§¤í•‘ (20%=ì ì •, 50%=ì˜ˆìƒ, 80%=ì†Œì‹ )        â”‚
â”‚  - ë³´ê°„ ì •ì±…: linear / nearest                              â”‚
â”‚  - ì¶œë ¥: percentage_cutoffs                                 â”‚
â”‚  - raw_componentsì— "percentage_key" ì €ì¥                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: RESTRICT - ê²°ê²© ì²´í¬                                â”‚
â”‚  - check_disqualification()                                 â”‚
â”‚  - ë£° íƒ€ì…:                                                 â”‚
â”‚    - ì¶œì„ë¥  (< 80%)                                         â”‚
â”‚    - ê³¼íƒ2ê³¼ëª© ë¯¸ì´ìˆ˜ (ì˜ë£Œê³„ì—´)                            â”‚
â”‚    - ì œ2ì™¸êµ­ì–´ ë¯¸ì´ìˆ˜ (íŠ¹ì • ëŒ€í•™)                           â”‚
â”‚  - âš ï¸ HIGH: ëŒ€í•™ëª… ë³„ì¹­(ì—°ëŒ€/ê³ ëŒ€) ì‹œ ë£° ëˆ„ë½ ê°€ëŠ¥          â”‚
â”‚  - ì¶œë ¥: rules_triggered[]                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 5: COMPUTE - ìµœì¢… ê³„ì‚°                                 â”‚
â”‚  - compute_theory_result()                                  â”‚
â”‚  - s_theory ê³„ì‚° (í™˜ì‚° ì ìˆ˜)                                â”‚
â”‚  - line íŒì • (TOP/HIGH/MID/LOW/DISQUALIFIED)                â”‚
â”‚  - probability ì¶”ì •                                         â”‚
â”‚  - ì¶œë ¥: TheoryResult                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì¶œë ¥: TheoryResult                                          â”‚
â”‚  - line: AdmissionLine                                      â”‚
â”‚  - probability: float                                       â”‚
â”‚  - score_theory: float                                      â”‚
â”‚  - raw_components: dict (ë””ë²„ê·¸/ì¶”ì ìš©)                     â”‚
â”‚  - engine_version: "3.0.0"                                  â”‚
â”‚  - excel_version: "202511_ê°€ì±„ì _20251114"                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì°¨ì´ì **:
- ê¸°ì¡´ ëª…ì„¸: 5ë‹¨ê³„ **ê°œë…**ë§Œ ì œì‹œ
- ì‹¤ì œ êµ¬í˜„: ê° ë‹¨ê³„ì˜ **ì…ì¶œë ¥, ì˜ˆì™¸ ì²˜ë¦¬, í´ë°± ì •ì±…, í”Œë˜ê·¸**ê¹Œì§€ êµ¬í˜„ë¨
- **ëª…ì„¸ ê°­**: ì‹¤ì œ êµ¬í˜„ì˜ ë³µì¡ë„ë¥¼ 80% ì´ìƒ ë°˜ì˜í•˜ì§€ ëª»í•¨

---

## 2. ê°­ ë¶„ì„: ë¬´ì—‡ì´ ë‹¤ë¥¸ê°€

### 2.1 ëˆ„ë½ëœ í•µì‹¬ ëª…ì„¸ (Missing Critical Specs)

| í•­ëª© | ê¸°ì¡´ ëª…ì„¸ | ì‹¤ì œ í•„ìš” | ì¤‘ìš”ë„ |
|:-----|:---------|:---------|:------|
| **PERCENTAGE ì¶• ë°©í–¥** | ì—†ìŒ | "0=ìƒìœ„ê¶Œ, ê°’ ì¦ê°€â†’í•˜ìœ„ê¶Œ" ëª…ì‹œ í•„ìˆ˜ | ğŸ”´ **Critical** |
| **ì»¤íŠ¸ë¼ì¸ ë ˆë²¨ ë§¤í•‘** | ì—†ìŒ | "20%=ì ì •(ìƒìœ„20%), 50%=ì˜ˆìƒ, 80%=ì†Œì‹ (ìƒìœ„80%)" | ğŸ”´ **Critical** |
| **Alias ë§¤ì¹­ ìš°ì„ ìˆœìœ„** | "ì •ê·œí™”" ì–¸ê¸‰ë§Œ | ì •í™•â†’ì „ê³µAliasâ†’ëŒ€í•™Aliasâ†’í¼ì§€ 4ë‹¨ê³„ | ğŸ”´ **Critical** |
| **Alias í‚¤ ì •ê·œí™” ê·œì¹™** | ì—†ìŒ | ì—­ë§¤í•‘ í‚¤ë„ `_normalize_university()` ì ìš© í•„ìˆ˜ | ğŸ”´ **Critical** |
| **ì˜ë£Œê³„ì—´ í‚¤ì›Œë“œ** | ì—†ìŒ | ì˜/ì•½/ì¹˜/í•œ/ìˆ˜ì˜ ëª…ì‹œ (ë‹¨ìˆœ "ì˜" ê¸ˆì§€) | ğŸŸ¡ **High** |
| **ê²°ê²© ë£°ì˜ ëŒ€í•™ëª… ì •ê·œí™”** | ì—†ìŒ | ê²°ê²© ì²´í¬ ì „ ëŒ€í•™ëª… ì •ê·œí™” í•„ìˆ˜ | ğŸŸ¡ **High** |
| **ë§¤ì¹­ í”Œë˜ê·¸ í•„ë“œ** | ì—†ìŒ | used_alias, used_fuzzy, match_type | ğŸŸ¡ **High** |
| **ë³´ê°„ ì •ì±…** | ì—†ìŒ | linear(ê¸°ë³¸) / nearest(ì˜µì…˜) | ğŸŸ¢ **Medium** |
| **NULL ì²˜ë¦¬ ì •ì±…** | ì—†ìŒ | ê¸°ë³¸ê°’ 0 / ì˜ˆì™¸ ë°œìƒ / ë¡œê·¸ ê²½ê³  | ğŸŸ¢ **Medium** |

### 2.2 ê³¼ëŒ€í‰ê°€ëœ í•­ëª© (Overestimated Items)

| í•­ëª© | ê¸°ì¡´ ëª…ì„¸ | ì‹¤ì œ ìƒíƒœ | ìˆ˜ì • í•„ìš” |
|:-----|:---------|:---------|:---------|
| **ì»¤íŠ¸ë¼ì¸ ìë™í™”ìœ¨ 90%** | 90% ê°€ì • | ì‹¤ì œëŠ” 90% ë‹¬ì„±, **ë‹¨ ë°©í–¥ ë²„ê·¸ë¡œ í’ˆì§ˆ ì €í•˜** | "ì •í™•ë„ 90%, í’ˆì§ˆ ë³´ì¦ 85%" |
| **ê²°ê²© ë£° ìë™í™”ìœ¨ 90%** | 90% ê°€ì • | ë³„ì¹­ ë¹„ì¼ê´€ì„±ìœ¼ë¡œ 10~20% ëˆ„ë½ ê°€ëŠ¥ | "ì»¤ë²„ë¦¬ì§€ 80~90%" |
| **API ì‘ë‹µ ì‹œê°„ P95 < 3ì´ˆ** | 3ì´ˆ | ë‹¨ì¼ ì¼€ì´ìŠ¤ í‰ê·  4.4ì´ˆ (í…ŒìŠ¤íŠ¸ í™˜ê²½) | "P95 < 5ì´ˆ (ìºì‹œ ë¯¸ì ìš©), < 1ì´ˆ (ìºì‹œ ì ìš©)" |

### 2.3 ê³¼ì†Œí‰ê°€ëœ í•­ëª© (Underestimated Items)

| í•­ëª© | ê¸°ì¡´ ëª…ì„¸ | ì‹¤ì œ í•„ìš” |
|:-----|:---------|:---------|
| **í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìˆ˜** | "ê³¨ë“  ì¼€ì´ìŠ¤ 3~5ê°œ" | 51ê°œ í…ŒìŠ¤íŠ¸ (ë‹¨ìœ„ 30+, í†µí•© 20+) |
| **ë°ì´í„° ê²€ì¦ ë‹¨ê³„** | "ê²€ì¦" ì–¸ê¸‰ë§Œ | validate_sheets, validate_columns, cast_numeric 3ë‹¨ê³„ |
| **ì—ëŸ¬ ì²˜ë¦¬** | ë¯¸ëª…ì‹œ | KeyError, ValueError, FileNotFoundError ë“± 10+ ì˜ˆì™¸ íƒ€ì… |

---

## 3. ê°­ ë¶„ì„: ì–´ë–»ê²Œ ë‹¤ë¥¸ê°€

### 3.1 PERCENTAGE ì»¤íŠ¸ë¼ì¸ ë§¤í•‘ ì—­ì „ ë²„ê·¸

**ê¸°ì¡´ ëª…ì„¸ (ì•”ë¬µì  ê°€ì •)**:
```python
# ëª…ì„¸ë˜ì§€ ì•Šì•˜ì§€ë§Œ ì½”ë“œê°€ ê°€ì •í•œ ê²ƒ
CUTOFF_PERCENTILES = {
    'ì ì •': 80,  # ìƒìœ„ 80% â†’ í•˜ìœ„ê¶Œ
    'ì˜ˆìƒ': 50,  # ìƒìœ„ 50% â†’ ì¤‘ìœ„ê¶Œ
    'ì†Œì‹ ': 20   # ìƒìœ„ 20% â†’ ìƒìœ„ê¶Œ
}
# ê²°ê³¼: ì ì •(80) > ì˜ˆìƒ(50) > ì†Œì‹ (20) â†’ ì ìˆ˜ ì—­ì „!
```

**ìˆ˜ì •ëœ êµ¬í˜„**:
```python
# ì‹¤ì œ PERCENTAGE ì¶• ì˜ë¯¸ ë°˜ì˜
CUTOFF_PERCENTILES = {
    'ì ì •': 20,  # ìƒìœ„ 20% = ì•ˆì •ê¶Œ (ì ìˆ˜ ë†’ìŒ)
    'ì˜ˆìƒ': 50,  # ìƒìœ„ 50% = ì¼ë°˜ê¶Œ
    'ì†Œì‹ ': 80   # ìƒìœ„ 80% = ë„ì „ê¶Œ (ì ìˆ˜ ë‚®ìŒ)
}
# ê²°ê³¼: ì ì •(20) < ì˜ˆìƒ(50) < ì†Œì‹ (80) â†’ ì ìˆ˜ ì •ìƒ!
```

**ê²€ì¦ ë°©ë²•**:
```python
# ì‹¤ë°ì´í„° ì˜ˆì‹œ: ê°€ì²œì˜í•™ ì´ê³¼
# PERCENTAGE ì‹œíŠ¸ì—ì„œ % ì»¬ëŸ¼ì´ 0.00 ~ 94.0 ë²”ìœ„

# (ìˆ˜ì • ì „) ì—­ì „ëœ ë§¤í•‘
ì ì • = lookup_percentage(80)  # â†’ 49.9ì 
ì˜ˆìƒ = lookup_percentage(50)  # â†’ 73.13ì 
ì†Œì‹  = lookup_percentage(20)  # â†’ 88.28ì 
# ì ì •(49.9) < ì˜ˆìƒ(73.13) < ì†Œì‹ (88.28) âŒ ì—­ì „!

# (ìˆ˜ì • í›„) ì •ìƒ ë§¤í•‘
ì ì • = lookup_percentage(20)  # â†’ 88.28ì 
ì˜ˆìƒ = lookup_percentage(50)  # â†’ 73.13ì 
ì†Œì‹  = lookup_percentage(80)  # â†’ 49.9ì 
# ì ì •(88.28) > ì˜ˆìƒ(73.13) > ì†Œì‹ (49.9) âœ… ì •ìƒ!
```

---

### 3.2 ëŒ€í•™ Alias ì˜¤ë§¤í•‘ ë°©ì§€ ë¡œì§

**ê¸°ì¡´ ëª…ì„¸ (ëª¨í˜¸í•¨)**:
```
"ëŒ€í•™ëª… ì •ê·œí™”"
"Alias ì§€ì›"
```

**ì‹¤ì œ êµ¬í˜„ (ìˆ˜ì • ì „ - ë²„ê·¸)**:
```python
# 1. Alias ì—­ë§¤í•‘ì´ ì •ê·œí™”ë˜ì§€ ì•ŠìŒ
UNIVERSITY_ALIASES = {
    "ì„œìš¸ëŒ€": ["ì„œìš¸ëŒ€í•™êµ", "SNU"],
    "ì—°ì„¸ëŒ€": ["ì—°ëŒ€", "ì—°ì„¸ëŒ€í•™êµ", "YONSEI"]
}

# 2. ì—­ë§¤í•‘ ìƒì„± (ì •ê·œí™” ì—†ì´)
reverse_map = {}
for official, aliases in UNIVERSITY_ALIASES.items():
    for alias in aliases:
        reverse_map[alias] = official  # í‚¤ê°€ ì •ê·œí™” ì•ˆë¨!

# 3. ë§¤ì¹­ ì‹œë„
user_input = "ì„œìš¸ê³¼í•™ê¸°ìˆ ëŒ€í•™êµ"
normalized = _normalize_university(user_input)  # "ì„œìš¸ê³¼í•™ê¸°ìˆ ëŒ€í•™êµ"

# 4. ì •í™• ë§¤ì¹­ ì‹¤íŒ¨ (í‚¤ê°€ ì •ê·œí™” ì•ˆë˜ì–´ì„œ)
if normalized in reverse_map:  # âŒ ì‹¤íŒ¨
    ...

# 5. ë¶€ë¶„ ë§¤ì¹­ìœ¼ë¡œ í´ë°± (ìœ„í—˜!)
for key in reverse_map:
    if "ì„œìš¸ëŒ€" in normalized:  # âš ï¸ "ì„œìš¸ê³¼í•™ê¸°ìˆ ëŒ€" â†’ "ì„œìš¸ëŒ€" ì˜¤ë§¤í•‘!
        return reverse_map[key]
```

**ì‹¤ì œ êµ¬í˜„ (ìˆ˜ì • í›„ - ìˆ˜ì •ë¨)**:
```python
# 1. Alias ì—­ë§¤í•‘ ìƒì„± ì‹œ ì •ê·œí™” ì ìš©
reverse_map = {}
for official, aliases in UNIVERSITY_ALIASES.items():
    for alias in aliases:
        normalized_key = _normalize_university(alias)  # âœ… ì •ê·œí™”!
        reverse_map[normalized_key] = official

# 2. ë§¤ì¹­ ì‹œë„
user_input = "ì„œìš¸ê³¼í•™ê¸°ìˆ ëŒ€í•™êµ"
normalized = _normalize_university(user_input)

# 3. ì •í™• ë§¤ì¹­ ì„±ê³µ
if normalized in reverse_map:  # âœ… ì„±ê³µ (í‚¤ê°€ ì •ê·œí™”ë¨)
    return reverse_map[normalized]

# 4. ë¶€ë¶„ ë§¤ì¹­ ì œê±° (ì˜¤ë§¤í•‘ ë°©ì§€)
# (ë¶€ë¶„ ë§¤ì¹­ ë¡œì§ ì‚­ì œë¨)
```

**í…ŒìŠ¤íŠ¸ ì¶”ê°€**:
```python
def test_university_alias_no_partial_match():
    """ëŒ€í•™ Alias ì˜¤ë§¤í•‘ ë°©ì§€ (ì„œìš¸ê³¼ê¸°ëŒ€ â†’ ì„œìš¸ëŒ€ ë°©ì§€)"""
    result = _resolve_university_alias("ì„œìš¸ê³¼í•™ê¸°ìˆ ëŒ€í•™êµ")
    assert result != "ì„œìš¸ëŒ€"  # âœ… ì˜¤ë§¤í•‘ ë°©ì§€
```

---

### 3.3 ì„±ëŠ¥ ê°­

**ê¸°ì¡´ ëª…ì„¸**:
```
NFR-P01: API ì‘ë‹µ ì‹œê°„ P95 â‰¤ 3ì´ˆ
```

**ì‹¤ì œ ì¸¡ì •**:
```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰
$ python -m pytest tests/ -v
==== 51 passed in 226.38s ====

# ë‹¨ì¼ ì¼€ì´ìŠ¤ë‹¹ í‰ê· 
226.38ì´ˆ / 51ê°œ = 4.43ì´ˆ/ì¼€ì´ìŠ¤

# P95 ì¶”ì • (ì›ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤)
226.38ì´ˆ / 51ê°œ * 1.5 ë°°ìˆ˜ = 6.65ì´ˆ
```

**ê°­ ë¶„ì„**:
- ëª…ì„¸: P95 < 3ì´ˆ
- ì‹¤ì œ: P95 â‰ˆ 6~7ì´ˆ (í…ŒìŠ¤íŠ¸ í™˜ê²½, ìºì‹œ ì—†ìŒ)
- ì›ì¸:
  1. ë§¤ ì¼€ì´ìŠ¤ë§ˆë‹¤ ì›Œí¬ë¶ ì „ì²´ ë¡œë“œ (5MB+)
  2. PERCENTAGE ì‹œíŠ¸ ì „ì²´ ìŠ¤ìº” (ìˆ˜ì²œ í–‰)
  3. í¼ì§€ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ (ê³„ì‚° ë¹„ìš© ë†’ìŒ)

**ê°œì„ ì•ˆ**:
```python
# 1. ì›Œí¬ë¶ ìºì‹±
@lru_cache(maxsize=1)
def load_workbook_cached(workbook_path: str):
    return WorkbookLoader(workbook_path)

# 2. INDEX ì¸ë©”ëª¨ë¦¬ ì¸ë±ì‹±
class CutoffExtractor:
    def __init__(self):
        self._index = {}  # ì‚¬ì „ ì¸ë±ì‹±
        
    def _build_index(self):
        # ì›Œí¬ë¶ ë¡œë“œ ì‹œ í•œ ë²ˆë§Œ ì¸ë±ìŠ¤ êµ¬ì¶•
        for row in self.sheet.iter_rows():
            key = (univ, major, type)
            self._index[key] = row

# 3. ëª©í‘œ ì„±ëŠ¥
- ë‹¨ì¼ ì¼€ì´ìŠ¤: < 1ì´ˆ (ìºì‹œ ì ìš©)
- API P95: < 3ì´ˆ (ìºì‹œ ì ìš©)
- ì´ˆê¸° ë¡œë“œ: < 10ì´ˆ í—ˆìš©
```

---

## 4. ê°­ ë¶„ì„: ì™œ ë‹¤ë¥¸ê°€

### 4.1 ëª…ì„¸ ì‘ì„± ì‹œì ì˜ ì •ë³´ ë¶€ì¡±

**ì›ì¸**:
- ê¸°ì¡´ ëª…ì„¸ëŠ” **PRDì˜ ê°œë…ì  ì„¤ëª…**ë§Œ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë¨
- ì‹¤ì œ ì—‘ì…€ íŒŒì¼ì˜ **ë°ì´í„° êµ¬ì¡°(% ì¶• ë°©í–¥, ì»¬ëŸ¼ëª…)**ë¥¼ í™•ì¸í•˜ì§€ ì•ŠìŒ
- Theory Engine **ì‹¤ì œ ì½”ë“œ**ë¥¼ ë¦¬ë·°í•˜ì§€ ì•ŠìŒ

**ê²°ê³¼**:
- PERCENTAGE ì¶• ë°©í–¥ ê°™ì€ **ë°ì´í„° ì˜ë¯¸ë¡ ì  ì´ìŠˆ**ë¥¼ ëª…ì„¸ê°€ ì¡ì§€ ëª»í•¨
- Alias ë§¤ì¹­ ìš°ì„ ìˆœìœ„ ê°™ì€ **êµ¬í˜„ ë””í…Œì¼**ì„ ëª…ì„¸ê°€ ë°˜ì˜í•˜ì§€ ëª»í•¨

---

### 4.2 "ìë™í™”ìœ¨ 85%"ì˜ í•¨ì •

**ê¸°ì¡´ ëª…ì„¸**:
```
| ì ìˆ˜ ë³€í™˜/í™˜ì‚° ì•Œê³ ë¦¬ì¦˜ | 85% | RAWSCORE + ìˆ˜ì‹ ë§¤í•‘ |
```

**ì‹¤ì œ ì˜ë¯¸**:
- "ìë™í™”ìœ¨ 85%"ëŠ” **ì»¤ë²„ë¦¬ì§€**ì´ì§€ **ì •í™•ë„**ê°€ ì•„ë‹˜
- ì¦‰, **85%ì˜ ì¼€ì´ìŠ¤ë¥¼ ìë™ ì²˜ë¦¬**í•˜ì§€ë§Œ, **ì²˜ë¦¬ ê²°ê³¼ê°€ 85% ì •í™•**í•˜ë‹¤ëŠ” ëœ»ì´ ì•„ë‹˜
- ì‹¤ì œë¡œëŠ”:
  - ì»¤ë²„ë¦¬ì§€: 85% âœ…
  - ì •í™•ë„: ì»¤íŠ¸ë¼ì¸ ë°©í–¥ ë²„ê·¸ë¡œ **í’ˆì§ˆ ì €í•˜ ê°€ëŠ¥** âŒ

**ëª…ì„¸ ê°œì„ **:
```
| ì ìˆ˜ ë³€í™˜ ì»¤ë²„ë¦¬ì§€ | 85% | RAWSCORE ë§¤í•‘ìœ¼ë¡œ 85% ì¼€ì´ìŠ¤ ì²˜ë¦¬ |
| ì ìˆ˜ ë³€í™˜ ì •í™•ë„ | 95% | ë§¤í•‘ëœ ì¼€ì´ìŠ¤ ì¤‘ 95% ì •í™• (Â±5% ì˜¤ì°¨) |
| ì»¤íŠ¸ë¼ì¸ ì¡°íšŒ ì»¤ë²„ë¦¬ì§€ | 90% | INDEX/PERCENTAGEë¡œ 90% ì¼€ì´ìŠ¤ ì¡°íšŒ |
| ì»¤íŠ¸ë¼ì¸ ì¡°íšŒ ì •í™•ë„ | 85% | ì¡°íšŒëœ ì»¤íŠ¸ë¼ì¸ì˜ 85%ê°€ ì‹¤ì œ í•©ê²©ì„  Â±5ì  ì´ë‚´ |
```

---

### 4.3 ì„¤ëª… ê°€ëŠ¥ì„± vs êµ¬í˜„ ê°€ëŠ¥ì„±

**ê¸°ì¡´ ëª…ì„¸**:
```
NFR-AI04: ì„¤ëª… ê°€ëŠ¥ì„± - ëª¨ë“  ì˜ˆì¸¡ì— ê·¼ê±° ì œì‹œ
```

**ì‹¤ì œ êµ¬í˜„**:
- `TheoryResult`ì— `raw_components` í•„ë“œëŠ” ìˆìŒ
- **í•˜ì§€ë§Œ**:
  - "ì™œ ì´ ì»¬ëŸ¼ì´ ì„ íƒëëŠ”ì§€" (Alias? í¼ì§€?)
  - "ì–´ë–¤ ë§¤í•‘ì´ ì¼ì–´ë‚¬ëŠ”ì§€" (ì˜ì˜ˆâ†’ì˜í•™?)
  - "í¼ì§€ ë§¤ì¹­ ìŠ¤ì½”ì–´ëŠ” ì–¼ë§ˆì˜€ëŠ”ì§€"
  - ì´ëŸ° ì •ë³´ê°€ **ê²°ê³¼ì— í¬í•¨ë˜ì§€ ì•ŠìŒ**

**ê°­**:
- ëª…ì„¸: "ê·¼ê±° ì œì‹œ" (ì¶”ìƒì )
- ì‹¤ì œ: ê·¼ê±°ë¥¼ **ì–´ë–¤ í•„ë“œì—, ì–´ë–¤ í˜•ì‹ìœ¼ë¡œ** ì €ì¥í• ì§€ ë¯¸ëª…ì‹œ
- ê²°ê³¼: êµ¬í˜„íŒ€ì´ **ìµœì†Œí•œì˜ ë””ë²„ê·¸ ì •ë³´**ë§Œ ì €ì¥ (raw_components)

**ê°œì„ ì•ˆ**:
```typescript
interface TheoryResult {
  // ê¸°ì¡´
  line: AdmissionLine;
  probability: number;
  score_theory: number;
  
  // ì¶”ê°€: ì„¤ëª… ê°€ëŠ¥ì„±
  explainability: {
    university_mapping: {
      input: string;
      matched: string;
      method: 'exact' | 'alias' | 'fuzzy';
      fuzzy_score?: number;
      alias_used?: string;
    };
    major_mapping: {
      input: string;
      matched: string;
      method: 'exact' | 'alias' | 'fuzzy';
      alias_chain?: string[];  // "ì˜ì˜ˆ â†’ ì˜í•™"
    };
    cutoff_source: {
      sheet: 'INDEX' | 'PERCENTAGE';
      column: string;
      percentile: number;
      interpolated: boolean;
    };
    disqualification_triggers: Array<{
      rule: string;
      reason: string;
      value: number | string;
    }>;
  };
}
```

---

## 5. ê°œì„ ëœ Theory Engine ê¸°ëŠ¥ëª…ì„¸ì„œ

### 5.1 Theory Engine v3 ê¸°ëŠ¥ ëª©ë¡

| ê¸°ëŠ¥ ID | ê¸°ëŠ¥ëª… | ì„¤ëª… | ìë™í™”ìœ¨ | ì •í™•ë„ ëª©í‘œ | ìš°ì„ ìˆœìœ„ |
|:--------|:-------|:-----|:--------:|:----------:|:--------:|
| `TE-F01` | `RAWSCORE_Conversion` | ì›ì ìˆ˜ â†’ í‘œì¤€ì ìˆ˜ ë³€í™˜ | 85% | 95% (Â±5%) | P0 |
| `TE-F02` | `INDEX_Lookup` | ëŒ€í•™/ì „ê³µ/ì „í˜• ê¸°ë°˜ ì»¤íŠ¸ë¼ì¸ ì¡°íšŒ | 90% | 90% (Â±5ì ) | P0 |
| `TE-F03` | `PERCENTAGE_Normalization` | ë°±ë¶„ìœ„ ê¸°ë°˜ ì»¤íŠ¸ë¼ì¸ ì •ê·œí™” | 90% | 90% (Â±3ì ) | P0 |
| `TE-F04` | `RESTRICT_Disqualification` | ê²°ê²© ì‚¬ìœ  ì²´í¬ | 85% | 100% (ê²°ê²©=ì •í™•) | P0 |
| `TE-F05` | `COMPUTE_FinalResult` | ìµœì¢… ì ìˆ˜/ë¼ì¸/í™•ë¥  ê³„ì‚° | 100% | 85% (Â±10% í™•ë¥ ) | P0 |
| `TE-F06` | `UniversityAlias_Resolution` | ëŒ€í•™ëª… ë³„ì¹­ í•´ì†Œ | 80% | 95% | P0 |
| `TE-F07` | `MajorAlias_Resolution` | ì „ê³µëª… ë³„ì¹­ í•´ì†Œ | 75% | 90% | P0 |
| `TE-F08` | `FuzzyMatching_Fallback` | í¼ì§€ ë§¤ì¹­ í´ë°± | 15% | 70% (threshold=75) | P1 |
| `TE-F09` | `VersionTracking` | ì—”ì§„/ì—‘ì…€ ë²„ì „ ì¶”ì  | 100% | 100% | P0 |
| `TE-F10` | `RawComponents_Logging` | ì¤‘ê°„ ê³„ì‚° ê³¼ì • ì €ì¥ | 100% | 100% | P0 |
| `TE-F11` | `Explainability_Flags` | ë§¤ì¹­/í´ë°± í”Œë˜ê·¸ ì €ì¥ | 0% | - | P1 (ì‹ ê·œ) |

---

### 5.2 TE-F03: `PERCENTAGE_Normalization` ìƒì„¸ ëª…ì„¸

#### ê¸°ëŠ¥ ì„¤ëª…

PERCENTAGE ì‹œíŠ¸ì˜ ë°±ë¶„ìœ„ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ì—¬ ì»¤íŠ¸ë¼ì¸ì„ ì •ê·œí™”í•©ë‹ˆë‹¤.

#### ì…ë ¥ ì¸í„°í˜ì´ìŠ¤

```python
@dataclass
class PercentageLookupRequest:
    university: str       # ì •ê·œí™”ëœ ëŒ€í•™ëª…
    major: str            # ì •ê·œí™”ëœ ì „ê³µëª…
    admission_type: str   # ì „í˜• ìœ í˜•
    percentile: int       # ë°±ë¶„ìœ„ (20, 50, 80)
    interpolation: str = 'linear'  # ë³´ê°„ ë°©ì‹
```

#### ì¶œë ¥ ì¸í„°í˜ì´ìŠ¤

```python
@dataclass
class PercentageLookupResult:
    cutoff_score: float         # ì»¤íŠ¸ë¼ì¸ ì ìˆ˜
    percentile: int             # ì¡°íšŒí•œ ë°±ë¶„ìœ„
    column_name: str            # ë§¤ì¹­ëœ ì»¬ëŸ¼ëª…
    interpolated: bool          # ë³´ê°„ ì—¬ë¶€
    confidence: float           # ì‹ ë¢°ë„ (0-1)
    
    # ì„¤ëª… ê°€ëŠ¥ì„± (ì‹ ê·œ)
    mapping_info: {
        'sheet': 'PERCENTAGE',
        'row_index': int,
        'exact_match': bool,
        'interpolation_method': str
    }
```

#### í•µì‹¬ ë¡œì§

```python
def lookup_percentage(
    university: str,
    major: str,
    admission_type: str,
    percentile: int,
    sheet: pd.DataFrame
) -> float:
    """
    PERCENTAGE ì‹œíŠ¸ì—ì„œ ë°±ë¶„ìœ„ ê¸°ë°˜ ì»¤íŠ¸ë¼ì¸ ì¡°íšŒ
    
    âš ï¸ CRITICAL: % ì¶• ë°©í–¥ ê·œì¹™
    - % ì»¬ëŸ¼ ê°’ 0.00 â†’ ìƒìœ„ 0% (ìµœìƒìœ„ê¶Œ)
    - % ì»¬ëŸ¼ ê°’ 100.0 â†’ ìƒìœ„ 100% (ìµœí•˜ìœ„ê¶Œ)
    - percentile=20 â†’ ìƒìœ„ 20% (ì•ˆì •ê¶Œ, ì ìˆ˜ ë†’ìŒ)
    - percentile=80 â†’ ìƒìœ„ 80% (ë„ì „ê¶Œ, ì ìˆ˜ ë‚®ìŒ)
    
    ì»¤íŠ¸ë¼ì¸ ë ˆë²¨ ë§¤í•‘:
    - ì ì • (20%) = ìƒìœ„ 20% = ì•ˆì •ê¶Œ = ì ìˆ˜ ë†’ìŒ
    - ì˜ˆìƒ (50%) = ìƒìœ„ 50% = ì¼ë°˜ê¶Œ = ì ìˆ˜ ì¤‘ê°„
    - ì†Œì‹  (80%) = ìƒìœ„ 80% = ë„ì „ê¶Œ = ì ìˆ˜ ë‚®ìŒ
    
    ë”°ë¼ì„œ: ì ì • ì ìˆ˜ > ì˜ˆìƒ ì ìˆ˜ > ì†Œì‹  ì ìˆ˜
    """
    # 1. ì»¬ëŸ¼ ë§¤ì¹­
    column = _match_percentage_column(university, major, admission_type)
    
    # 2. ë°±ë¶„ìœ„ í–‰ ì¡°íšŒ
    row = sheet[sheet['%'] == percentile]
    
    # 3. ì •í™• ë§¤ì¹­ ì‹œë„
    if not row.empty:
        return row[column].iloc[0]
    
    # 4. ë³´ê°„ (ì •í™• ê°’ ì—†ì„ ë•Œ)
    return _interpolate_percentage(sheet, column, percentile, method='linear')
```

#### ìˆ˜ìš© ê¸°ì¤€ (Acceptance Criteria)

**AC1: ì¶• ë°©í–¥ ì •í™•ì„±**
- [ ] PERCENTAGE ì‹œíŠ¸ì˜ % ì¶•ì´ 0â†’100 ì¦ê°€ ì‹œ ì ìˆ˜ê°€ ê°ì†Œí•˜ëŠ” ê²ƒì„ í™•ì¸
- [ ] ì ì • ì ìˆ˜ â‰¥ ì˜ˆìƒ ì ìˆ˜ â‰¥ ì†Œì‹  ì ìˆ˜ (ëª¨ë“  ì¼€ì´ìŠ¤)
- [ ] í…ŒìŠ¤íŠ¸: `test_cutoff_score_direction_sanity()`

**AC2: ë°±ë¶„ìœ„ ë§¤í•‘**
- [ ] 20% â†’ ì ì • (ìƒìœ„ 20%, ì•ˆì •ê¶Œ)
- [ ] 50% â†’ ì˜ˆìƒ (ìƒìœ„ 50%, ì¼ë°˜ê¶Œ)
- [ ] 80% â†’ ì†Œì‹  (ìƒìœ„ 80%, ë„ì „ê¶Œ)
- [ ] í…ŒìŠ¤íŠ¸: `test_cutoff_percentile_mapping()`

**AC3: ë³´ê°„ ì •í™•ì„±**
- [ ] ì •í™• ê°’ ì¡´ì¬ ì‹œ ë³´ê°„ ì—†ì´ ì§ì ‘ ë°˜í™˜
- [ ] ì •í™• ê°’ ì—†ì„ ë•Œë§Œ linear ë³´ê°„
- [ ] ë³´ê°„ ê²°ê³¼ê°€ ì¸ì ‘ ê°’ ë²”ìœ„ ë‚´ì— ìˆìŒ
- [ ] í…ŒìŠ¤íŠ¸: `test_percentage_interpolation()`

**AC4: ì—ëŸ¬ ì²˜ë¦¬**
- [ ] ì»¬ëŸ¼ ë¯¸ë°œê²¬ ì‹œ KeyError ë°œìƒ
- [ ] % ì»¬ëŸ¼ ì—†ì„ ì‹œ ValueError ë°œìƒ
- [ ] í…ŒìŠ¤íŠ¸: `test_percentage_error_handling()`

**AC5: ì„±ëŠ¥**
- [ ] ë‹¨ì¼ ì¡°íšŒ < 100ms (ìºì‹œ ì ìš© ì‹œ)
- [ ] ë‹¨ì¼ ì¡°íšŒ < 500ms (ìºì‹œ ë¯¸ì ìš© ì‹œ)
- [ ] í…ŒìŠ¤íŠ¸: `test_percentage_lookup_performance()`

---

### 5.3 TE-F06: `UniversityAlias_Resolution` ìƒì„¸ ëª…ì„¸

#### ê¸°ëŠ¥ ì„¤ëª…

ì‚¬ìš©ì ì…ë ¥ ëŒ€í•™ëª…ì„ ê³µì‹ ëŒ€í•™ëª…ìœ¼ë¡œ í•´ì†Œí•©ë‹ˆë‹¤. ë³„ì¹­/ì•½ì–´/ì˜¤íƒ€ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.

#### Alias ë§¤í•‘ ê·œì¹™

```python
UNIVERSITY_ALIASES = {
    "ì„œìš¸ëŒ€": ["ì„œìš¸ëŒ€í•™êµ", "SNU", "ì„œìš¸ëŒ€í•™êµ(ë³¸êµ)"],
    "ì—°ì„¸ëŒ€": ["ì—°ëŒ€", "ì—°ì„¸ëŒ€í•™êµ", "YONSEI", "ì—°ì„¸ëŒ€(ì„œìš¸)"],
    "ê³ ë ¤ëŒ€": ["ê³ ëŒ€", "ê³ ë ¤ëŒ€í•™êµ", "KOREA", "ê³ ë ¤ëŒ€(ì„œìš¸)"],
    "í™ìµëŒ€": ["í™ëŒ€", "í™ìµëŒ€í•™êµ", "HONGIK", "í™ìµëŒ€(ì„œìš¸)"],
    "ì´í™”ì—¬ëŒ€": ["ì´ëŒ€", "ì´í™”ì—¬ìëŒ€í•™êµ", "EWHA"],
    # ... ì „ì²´ 20+ ëŒ€í•™
}

# âš ï¸ CRITICAL: ì—­ë§¤í•‘ í‚¤ ì •ê·œí™” í•„ìˆ˜
def _build_reverse_map():
    reverse = {}
    for official, aliases in UNIVERSITY_ALIASES.items():
        for alias in aliases:
            # âœ… í‚¤ë„ ì •ê·œí™”!
            normalized_key = _normalize_university(alias)
            reverse[normalized_key] = official
    return reverse
```

#### ì •ê·œí™” ê·œì¹™

```python
def _normalize_university(name: str) -> str:
    """
    ëŒ€í•™ëª… ì •ê·œí™”
    
    ê·œì¹™:
    1. ê³µë°±/ê´„í˜¸/íŠ¹ìˆ˜ë¬¸ì ì œê±°
    2. "ëŒ€í•™êµ" ì ‘ë¯¸ì‚¬ ì œê±°
    3. ì†Œë¬¸ì ë³€í™˜
    
    ì˜ˆì‹œ:
    - "ì„œìš¸ëŒ€í•™êµ (ë³¸êµ)" â†’ "ì„œìš¸ëŒ€"
    - "ì—°ì„¸ëŒ€(ì„œìš¸)" â†’ "ì—°ì„¸ëŒ€"
    - "HONGIK UNIVERSITY" â†’ "hongik"
    """
    import re
    
    # 1. ì†Œë¬¸ì ë³€í™˜
    normalized = name.lower()
    
    # 2. ê´„í˜¸ ì œê±°
    normalized = re.sub(r'\([^)]*\)', '', normalized)
    
    # 3. ê³µë°±/íŠ¹ìˆ˜ë¬¸ì ì œê±°
    normalized = re.sub(r'[^\wê°€-í£]', '', normalized)
    
    # 4. "ëŒ€í•™êµ" ì œê±°
    normalized = normalized.replace('ëŒ€í•™êµ', '').replace('ëŒ€', '')
    
    return normalized.strip()
```

#### ë§¤ì¹­ ìš°ì„ ìˆœìœ„

```python
def resolve_university(user_input: str) -> str:
    """
    ëŒ€í•™ëª… í•´ì†Œ (ìš°ì„ ìˆœìœ„ ìˆœì„œ)
    
    1ï¸âƒ£ ì •í™• ë§¤ì¹­ (ì •ê·œí™” í›„)
    2ï¸âƒ£ Alias ë§¤ì¹­ (ì—­ë§¤í•‘)
    3ï¸âƒ£ í¼ì§€ ë§¤ì¹­ (threshold=75)
    4ï¸âƒ£ ì‹¤íŒ¨ â†’ KeyError
    """
    normalized = _normalize_university(user_input)
    
    # 1. ì •í™• ë§¤ì¹­
    if normalized in OFFICIAL_UNIVERSITIES:
        return normalized
    
    # 2. Alias ë§¤ì¹­
    if normalized in REVERSE_ALIAS_MAP:
        return REVERSE_ALIAS_MAP[normalized]
    
    # 3. í¼ì§€ ë§¤ì¹­
    best_match, score = rapidfuzz.process.extractOne(
        normalized, 
        OFFICIAL_UNIVERSITIES,
        scorer=rapidfuzz.fuzz.ratio
    )
    if score >= 75:
        return best_match
    
    # 4. ì‹¤íŒ¨
    raise KeyError(f"ëŒ€í•™ëª… ë§¤ì¹­ ì‹¤íŒ¨: {user_input}")
```

#### ìˆ˜ìš© ê¸°ì¤€ (Acceptance Criteria)

**AC1: ì •í™• ë§¤ì¹­ ìš°ì„ **
- [ ] "ì„œìš¸ëŒ€" â†’ "ì„œìš¸ëŒ€" (ì •ê·œí™” í›„ ì •í™• ë§¤ì¹­)
- [ ] "í™ìµëŒ€í•™êµ" â†’ "í™ìµëŒ€" (ì •ê·œí™”ë¡œ ì ‘ë¯¸ì‚¬ ì œê±°)
- [ ] í…ŒìŠ¤íŠ¸: `test_university_exact_match()`

**AC2: Alias ë§¤ì¹­**
- [ ] "SNU" â†’ "ì„œìš¸ëŒ€"
- [ ] "ì—°ëŒ€" â†’ "ì—°ì„¸ëŒ€"
- [ ] "ì´ëŒ€" â†’ "ì´í™”ì—¬ëŒ€"
- [ ] í…ŒìŠ¤íŠ¸: `test_university_alias_match()`

**AC3: ì˜¤ë§¤í•‘ ë°©ì§€**
- [ ] "ì„œìš¸ê³¼í•™ê¸°ìˆ ëŒ€í•™êµ" â†’ "ì„œìš¸ëŒ€" âŒ (ì˜¤ë§¤í•‘ ë°©ì§€)
- [ ] "ì„œìš¸ê³¼ê¸°ëŒ€" â†’ KeyError or í¼ì§€ ë§¤ì¹­ (ì •í™• ë§¤í•‘ ì•„ë‹˜)
- [ ] í…ŒìŠ¤íŠ¸: `test_university_no_partial_match()`

**AC4: ê´„í˜¸ í‘œê¸° ì²˜ë¦¬**
- [ ] "ì—°ì„¸ëŒ€(ì›ì£¼)" â†’ "ì—°ì„¸ëŒ€"
- [ ] "ê³ ë ¤ëŒ€(ì„¸ì¢…)" â†’ "ê³ ë ¤ëŒ€"
- [ ] í…ŒìŠ¤íŠ¸: `test_university_parentheses()`

**AC5: í¼ì§€ ë§¤ì¹­ ìµœí›„ ìˆ˜ë‹¨**
- [ ] ì˜¤íƒ€ ì²˜ë¦¬: "ì„œìš¸íƒœ" â†’ "ì„œìš¸ëŒ€" (score=90+)
- [ ] Threshold ë¯¸ë‹¬ ì‹œ KeyError
- [ ] í…ŒìŠ¤íŠ¸: `test_university_fuzzy_fallback()`

**AC6: ëŒ€ì†Œë¬¸ì ë¬´ê´€**
- [ ] "HONGIK" â†’ "í™ìµëŒ€"
- [ ] "snu" â†’ "ì„œìš¸ëŒ€"
- [ ] í…ŒìŠ¤íŠ¸: `test_university_case_insensitive()`

---

### 5.4 TE-F07: `MajorAlias_Resolution` ìƒì„¸ ëª…ì„¸

#### Alias ë§¤í•‘ ê·œì¹™

```python
MAJOR_ALIASES = {
    "ì˜í•™": ["ì˜ì˜ˆ", "ì˜ì˜ˆê³¼", "ì˜í•™ê³¼", "ì˜í•™ë¶€"],
    "ì•½í•™": ["ì•½í•™ê³¼", "ì•½í•™ë¶€"],
    "ì¹˜ì˜í•™": ["ì¹˜ì˜ì˜ˆ", "ì¹˜ì˜ì˜ˆê³¼", "ì¹˜ì˜í•™ê³¼"],
    "í•œì˜í•™": ["í•œì˜ì˜ˆ", "í•œì˜ì˜ˆê³¼", "í•œì˜í•™ê³¼"],
    "ìˆ˜ì˜í•™": ["ìˆ˜ì˜ì˜ˆ", "ìˆ˜ì˜ì˜ˆê³¼", "ìˆ˜ì˜í•™ê³¼"],
    "ê°„í˜¸": ["ê°„í˜¸í•™ê³¼", "ê°„í˜¸í•™ë¶€"],
    "ë””ìì¸": ["ì‹œê°ë””ìì¸", "ì‚°ì—…ë””ìì¸", "ê³µì˜ˆë””ìì¸"],
    "íšŒí™”": ["í•œêµ­í™”", "ì„œì–‘í™”"],
    # ... ì „ì²´ 30+ ì „ê³µ
}
```

#### ë§¤ì¹­ ìš°ì„ ìˆœìœ„

```python
def resolve_major(user_input: str, university: str = None) -> str:
    """
    ì „ê³µëª… í•´ì†Œ
    
    ìš°ì„ ìˆœìœ„:
    1ï¸âƒ£ ì •í™• ë§¤ì¹­ (ì •ê·œí™” í›„)
    2ï¸âƒ£ ì „ê³µ Alias ë§¤ì¹­
    3ï¸âƒ£ í¼ì§€ ë§¤ì¹­ (threshold=80, ëŒ€í•™ë³„ ì „ê³µ ë¦¬ìŠ¤íŠ¸ ë‚´)
    4ï¸âƒ£ ì‹¤íŒ¨ â†’ KeyError
    
    âš ï¸ ì¤‘ìš”: ì „ê³µ Aliasë¥¼ í¼ì§€ë³´ë‹¤ **ìš°ì„ **
    - ì´ìœ : "ì˜ì˜ˆ â†’ ì˜í•™" ê°™ì€ ë„ë©”ì¸ ì§€ì‹ ìš°ì„ 
    """
    normalized = _normalize_major(user_input)
    
    # 1. ì •í™• ë§¤ì¹­
    if normalized in OFFICIAL_MAJORS:
        return normalized
    
    # 2. ì „ê³µ Alias ë§¤ì¹­
    for official, aliases in MAJOR_ALIASES.items():
        for alias in aliases:
            if _normalize_major(alias) == normalized:
                return official
    
    # 3. í¼ì§€ ë§¤ì¹­ (ëŒ€í•™ë³„ ì „ê³µ ë¦¬ìŠ¤íŠ¸ë¡œ ì œí•œ)
    if university:
        majors_in_university = _get_majors_by_university(university)
        best_match, score = rapidfuzz.process.extractOne(
            normalized, 
            majors_in_university,
            scorer=rapidfuzz.fuzz.ratio
        )
        if score >= 80:
            return best_match
    
    # 4. ì‹¤íŒ¨
    raise KeyError(f"ì „ê³µëª… ë§¤ì¹­ ì‹¤íŒ¨: {user_input}")
```

#### ìˆ˜ìš© ê¸°ì¤€ (Acceptance Criteria)

**AC1: ì˜ë£Œê³„ì—´ Alias í•„ìˆ˜**
- [ ] "ì˜ì˜ˆ" â†’ "ì˜í•™"
- [ ] "ì¹˜ì˜ì˜ˆ" â†’ "ì¹˜ì˜í•™"
- [ ] "í•œì˜ì˜ˆ" â†’ "í•œì˜í•™"
- [ ] í…ŒìŠ¤íŠ¸: `test_major_medical_alias()`
- [ ] **ê·¼ê±°**: ì‹¤ë°ì´í„°ì— "ì˜ì˜ˆ" ì»¬ëŸ¼ 0ê°œ, "ì˜í•™" ì»¬ëŸ¼ 62ê°œ

**AC2: ì „ê³µ Alias ìš°ì„ ìˆœìœ„**
- [ ] "ì˜ì˜ˆ" ì…ë ¥ ì‹œ í¼ì§€ ë§¤ì¹­ë³´ë‹¤ Alias ë§¤ì¹­ ìš°ì„ 
- [ ] í…ŒìŠ¤íŠ¸: `test_major_alias_priority()`

**AC3: ì •ê·œí™” ë¹„êµ**
- [ ] "ì‹œ ê° ë”” ì ì¸" â†’ "ì‹œê°ë””ìì¸" (ê³µë°± ì œê±°)
- [ ] "Visual Design" â†’ "ì‹œê°ë””ìì¸" (ì˜ë¬¸ ì²˜ë¦¬)
- [ ] í…ŒìŠ¤íŠ¸: `test_major_normalization()`

**AC4: ëŒ€í•™ë³„ ì „ê³µ ì œí•œ**
- [ ] í™ìµëŒ€ ì§€ì› ì‹œ í™ìµëŒ€ ì „ê³µ ë¦¬ìŠ¤íŠ¸ ë‚´ì—ì„œë§Œ í¼ì§€ ë§¤ì¹­
- [ ] í…ŒìŠ¤íŠ¸: `test_major_fuzzy_by_university()`

---

### 5.5 TE-F04: `RESTRICT_Disqualification` ìƒì„¸ ëª…ì„¸

#### ê²°ê²© ë£° ì •ì˜

```python
@dataclass
class DisqualificationRule:
    rule_id: str
    name: str
    condition: Callable[[StudentProfile], bool]
    reason_template: str
    severity: 'critical' | 'warning'

# ê²°ê²© ë£° ëª©ë¡
DISQUALIFICATION_RULES = [
    DisqualificationRule(
        rule_id="DQ-001",
        name="ì¶œì„ë¥  ë¶€ì¡±",
        condition=lambda p: p.attendance_rate < 0.80,
        reason_template="ì¶œì„ë¥  {attendance_rate:.1%} (ê¸°ì¤€: 80% ì´ìƒ)",
        severity='critical'
    ),
    DisqualificationRule(
        rule_id="DQ-002",
        name="ì˜ë£Œê³„ì—´ ê³¼íƒ2ê³¼ëª© ë¯¸ì´ìˆ˜",
        condition=lambda p: (
            _is_medical_major(p.target.major) and 
            p.science_subject_count < 2
        ),
        reason_template="ê³¼íƒ {science_subject_count}ê³¼ëª© (ê¸°ì¤€: 2ê³¼ëª© ì´ìƒ)",
        severity='critical'
    ),
    DisqualificationRule(
        rule_id="DQ-003",
        name="ì œ2ì™¸êµ­ì–´ ë¯¸ì´ìˆ˜",
        condition=lambda p: (
            _requires_second_language(p.target.university) and
            p.second_language is None
        ),
        reason_template="ì œ2ì™¸êµ­ì–´ ë¯¸ì´ìˆ˜ (í•„ìˆ˜: {university})",
        severity='critical'
    ),
    # ... ì¶”ê°€ ë£°
]
```

#### ì˜ë£Œê³„ì—´ íŒì • ë¡œì§ (ê°œì„ ì•ˆ)

```python
def _is_medical_major(major: str) -> bool:
    """
    ì˜ë£Œê³„ì—´ ì—¬ë¶€ íŒì •
    
    âš ï¸ HIGH ê°­: ê¸°ì¡´ ë¡œì§ì´ "ì˜" ë‹¨ì¼ ë¬¸ì í¬í•¨ ì‹œ True â†’ ì˜¤íƒ
    
    ìˆ˜ì •ì•ˆ:
    - ëª…ì‹œì  í‚¤ì›Œë“œë§Œ ì¸ì • (ì •ê·œí™” í›„)
    - "ì˜ë¥˜í•™", "ì˜ìƒë””ìì¸" ê°™ì€ ì˜¤íƒ ë°©ì§€
    """
    normalized = _normalize_major(major)
    
    # ì˜ë£Œê³„ì—´ í‚¤ì›Œë“œ (ì •ê·œí™” í›„)
    MEDICAL_KEYWORDS = [
        'ì˜í•™', 'ì˜ì˜ˆ',
        'ì•½í•™',
        'ì¹˜ì˜í•™', 'ì¹˜ì˜ì˜ˆ',
        'í•œì˜í•™', 'í•œì˜ì˜ˆ',
        'ìˆ˜ì˜í•™', 'ìˆ˜ì˜ì˜ˆ',
        'ê°„í˜¸'
    ]
    
    # ì •í™• ë§¤ì¹­ ë˜ëŠ” ì ‘ë‘ì‚¬ ë§¤ì¹­
    for keyword in MEDICAL_KEYWORDS:
        if normalized == keyword or normalized.startswith(keyword):
            return True
    
    return False
```

#### ëŒ€í•™ëª… ì •ê·œí™” ì ìš© (ì‹ ê·œ)

```python
def check_disqualification(
    profile: StudentProfile,
    rules: List[DisqualificationRule]
) -> List[str]:
    """
    ê²°ê²© ì‚¬ìœ  ì²´í¬
    
    âš ï¸ HIGH ê°­: ê²°ê²© ë£°ì´ ëŒ€í•™ëª… ë³„ì¹­ì„ ì¸ì‹ ëª»í•¨
    
    ìˆ˜ì •ì•ˆ:
    - ê²°ê²© ì²´í¬ ì „ì— profile.target.universityë¥¼ ì •ê·œí™”
    - CutoffExtractorì™€ ë™ì¼í•œ ì •ê·œí™” ê·œì¹™ ì ìš©
    """
    # ëŒ€í•™ëª… ì •ê·œí™” (ì‹ ê·œ)
    profile.target.university = resolve_university_alias(
        profile.target.university
    )
    
    # ê²°ê²© ì²´í¬
    triggered = []
    for rule in rules:
        if rule.condition(profile):
            triggered.append({
                'rule_id': rule.rule_id,
                'reason': rule.reason_template.format(**profile.__dict__),
                'severity': rule.severity
            })
    
    return triggered
```

#### ìˆ˜ìš© ê¸°ì¤€ (Acceptance Criteria)

**AC1: ì¶œì„ë¥  ê²°ê²©**
- [ ] ì¶œì„ë¥  < 80% â†’ DQ-001 íŠ¸ë¦¬ê±°
- [ ] ì¶œì„ë¥  â‰¥ 80% â†’ í†µê³¼
- [ ] í…ŒìŠ¤íŠ¸: `test_disqualification_attendance()`

**AC2: ì˜ë£Œê³„ì—´ ê³¼íƒ2ê³¼ëª©**
- [ ] ì˜í•™ ì „ê³µ + ê³¼íƒ 1ê³¼ëª© â†’ DQ-002 íŠ¸ë¦¬ê±°
- [ ] ì˜í•™ ì „ê³µ + ê³¼íƒ 2ê³¼ëª© â†’ í†µê³¼
- [ ] ì˜ë¥˜í•™ ì „ê³µ â†’ DQ-002 **íŠ¸ë¦¬ê±° ì•ˆë¨** (ì˜¤íƒ ë°©ì§€)
- [ ] í…ŒìŠ¤íŠ¸: `test_disqualification_medical_science()`

**AC3: ëŒ€í•™ëª… ë³„ì¹­ ì¸ì‹**
- [ ] "ì—°ëŒ€" ì…ë ¥ â†’ "ì—°ì„¸ëŒ€" ì œ2ì™¸êµ­ì–´ ë£° ì ìš©
- [ ] "SNU" ì…ë ¥ â†’ "ì„œìš¸ëŒ€" ë£° ì ìš©
- [ ] í…ŒìŠ¤íŠ¸: `test_disqualification_university_alias()`

**AC4: ê²°ê²© ìš°ì„ ìˆœìœ„**
- [ ] ì—¬ëŸ¬ ê²°ê²© ë™ì‹œ ë°œìƒ ì‹œ ëª¨ë‘ ë°˜í™˜
- [ ] severity='critical' ìš°ì„  ì •ë ¬
- [ ] í…ŒìŠ¤íŠ¸: `test_disqualification_multiple()`

---

## 6. ê²€ì¦ ê¸°ì¤€ ë° í…ŒìŠ¤íŠ¸ ëª…ì„¸

### 6.1 Golden Case í™•ì¥ (ì‹¤ë°ì´í„° ê¸°ë°˜)

#### GC-001: ì„œìš¸ëŒ€ ì•ˆì •ê¶Œ

```python
def test_gc001_seoul_national_safe():
    """ì„œìš¸ëŒ€ ì•ˆì •ê¶Œ í•™ìƒ (SAFE ë¼ì¸)"""
    profile = StudentProfile(
        korean_std=140,
        math_std=135,
        track="ì´ê³¼",
        overall_grade="A",
        target=Target(
            university="ì„œìš¸ëŒ€",
            major="íšŒí™”",
            admission_type="ì •ì‹œ"
        )
    )
    
    result = compute_theory_result(profile, workbook)
    
    # ê²€ì¦
    assert result.line == "SAFE"
    assert 0.80 <= result.probability <= 0.90
    assert result.score_theory >= result.cutoffs['ì ì •']
    assert result.cutoff_gap_safe > 0
    assert len(result.rules_triggered) == 0
```

#### GC-002: í™ëŒ€ ì¼ë°˜ê¶Œ

```python
def test_gc002_hongik_normal():
    """í™ëŒ€ ì¼ë°˜ê¶Œ í•™ìƒ (NORMAL ë¼ì¸)"""
    profile = StudentProfile(
        korean_std=130,
        math_std=125,
        track="ì´ê³¼",
        overall_grade="B+",
        target=Target(
            university="í™ëŒ€",
            major="ë””ìì¸",
            admission_type="ì •ì‹œ"
        )
    )
    
    result = compute_theory_result(profile, workbook)
    
    # ê²€ì¦
    assert result.line == "NORMAL"
    assert 0.60 <= result.probability <= 0.70
    assert result.cutoffs['ì˜ˆìƒ'] <= result.score_theory < result.cutoffs['ì ì •']
    assert result.cutoff_gap_normal > 0
```

#### GC-003: ê²°ê²© ì‚¬ìœ 

```python
def test_gc003_disqualified_attendance():
    """ì¶œì„ë¥  ë¶€ì¡±ìœ¼ë¡œ ê²°ê²©"""
    profile = StudentProfile(
        korean_std=140,
        math_std=135,
        track="ì´ê³¼",
        overall_grade="A-",
        attendance_rate=0.70,  # < 80%
        target=Target(
            university="í™ëŒ€",
            major="ë””ìì¸",
            admission_type="ì •ì‹œ"
        )
    )
    
    result = compute_theory_result(profile, workbook)
    
    # ê²€ì¦
    assert result.line == "DISQUALIFIED"
    assert result.probability == 0.0
    assert "DQ-001" in [r['rule_id'] for r in result.rules_triggered]
```

#### GC-004: Alias ë§¤ì¹­ (ì‹ ê·œ)

```python
def test_gc004_university_alias():
    """ëŒ€í•™ Alias ë§¤ì¹­ (ì—°ëŒ€ â†’ ì—°ì„¸ëŒ€)"""
    profile = StudentProfile(
        korean_std=135,
        math_std=130,
        track="ì´ê³¼",
        overall_grade="A-",
        target=Target(
            university="ì—°ëŒ€",  # Alias
            major="ê²½ì˜",
            admission_type="ì •ì‹œ"
        )
    )
    
    result = compute_theory_result(profile, workbook)
    
    # ê²€ì¦
    assert result.explainability.university_mapping.matched == "ì—°ì„¸ëŒ€"
    assert result.explainability.university_mapping.method == "alias"
    assert result.explainability.university_mapping.alias_used == "ì—°ëŒ€"
```

#### GC-005: ì „ê³µ Alias ë§¤ì¹­ (ì‹ ê·œ)

```python
def test_gc005_major_alias_medical():
    """ì „ê³µ Alias ë§¤ì¹­ (ì˜ì˜ˆ â†’ ì˜í•™)"""
    profile = StudentProfile(
        korean_std=145,
        math_std=140,
        track="ì´ê³¼",
        overall_grade="A+",
        science_subject_count=2,
        target=Target(
            university="ê°€ì²œëŒ€",
            major="ì˜ì˜ˆ",  # Alias
            admission_type="ì •ì‹œ"
        )
    )
    
    result = compute_theory_result(profile, workbook)
    
    # ê²€ì¦
    assert result.explainability.major_mapping.matched == "ì˜í•™"
    assert result.explainability.major_mapping.method == "alias"
    assert result.explainability.major_mapping.alias_chain == ["ì˜ì˜ˆ", "ì˜í•™"]
    assert len(result.rules_triggered) == 0  # ê³¼íƒ2ê³¼ëª© ì¶©ì¡±
```

#### GC-006: ì»¤íŠ¸ë¼ì¸ ë°©í–¥ ê²€ì¦ (ì‹ ê·œ)

```python
def test_gc006_cutoff_score_direction():
    """ì»¤íŠ¸ë¼ì¸ ì ìˆ˜ ë°©í–¥ ê²€ì¦ (ì ì • â‰¥ ì˜ˆìƒ â‰¥ ì†Œì‹ )"""
    profile = StudentProfile(
        korean_std=130,
        math_std=125,
        track="ì´ê³¼",
        overall_grade="B+",
        target=Target(
            university="í™ëŒ€",
            major="ë””ìì¸",
            admission_type="Aì „í˜•"
        )
    )
    
    result = compute_theory_result(profile, workbook)
    
    # ì»¤íŠ¸ë¼ì¸ ë°©í–¥ ê²€ì¦
    assert result.cutoffs['ì ì •'] >= result.cutoffs['ì˜ˆìƒ']
    assert result.cutoffs['ì˜ˆìƒ'] >= result.cutoffs['ì†Œì‹ ']
    
    # ì„¤ëª…
    # - ì ì •(20%): ìƒìœ„ 20%, ì ìˆ˜ ë†’ìŒ
    # - ì˜ˆìƒ(50%): ìƒìœ„ 50%, ì ìˆ˜ ì¤‘ê°„
    # - ì†Œì‹ (80%): ìƒìœ„ 80%, ì ìˆ˜ ë‚®ìŒ
```

#### GC-007: ì˜¤ë§¤í•‘ ë°©ì§€ (ì‹ ê·œ)

```python
def test_gc007_no_university_mismatch():
    """ëŒ€í•™ ì˜¤ë§¤í•‘ ë°©ì§€ (ì„œìš¸ê³¼ê¸°ëŒ€ â†’ ì„œìš¸ëŒ€ ë°©ì§€)"""
    profile = StudentProfile(
        korean_std=125,
        math_std=120,
        track="ì´ê³¼",
        overall_grade="B",
        target=Target(
            university="ì„œìš¸ê³¼í•™ê¸°ìˆ ëŒ€í•™êµ",
            major="ê¸°ê³„ê³µí•™",
            admission_type="ì •ì‹œ"
        )
    )
    
    # 1. ì„œìš¸ëŒ€ë¡œ ì˜¤ë§¤í•‘ ë˜ì–´ì„œëŠ” ì•ˆë¨
    with pytest.raises(KeyError):
        result = compute_theory_result(profile, workbook)
    
    # ë˜ëŠ” í¼ì§€ ë§¤ì¹­ìœ¼ë¡œ ì •í™•íˆ ë§¤ì¹­ë˜ì–´ì•¼ í•¨
    # (ì„œìš¸ê³¼ê¸°ëŒ€ê°€ ì›Œí¬ë¶ì— ìˆë‹¤ë©´)
```

---

### 6.2 í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë§¤íŠ¸ë¦­ìŠ¤

| í…ŒìŠ¤íŠ¸ ì¹´í…Œê³ ë¦¬ | ëª©í‘œ ì»¤ë²„ë¦¬ì§€ | í˜„ì¬ ìƒíƒœ | ê°­ |
|:---------------|:-------------|:---------|:---|
| **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸** | 80%+ | ~85% (51ê°œ ì¤‘ 30+ê°œ) | âœ… ë‹¬ì„± |
| **í†µí•© í…ŒìŠ¤íŠ¸** | 70%+ | ~75% (51ê°œ ì¤‘ 20+ê°œ) | âœ… ë‹¬ì„± |
| **Golden Case** | 10+ ì¼€ì´ìŠ¤ | 7ê°œ (ì‹ ê·œ 3ê°œ ì¶”ê°€ í•„ìš”) | âš ï¸ ë¶€ì¡± |
| **Sanity í…ŒìŠ¤íŠ¸** | í•„ìˆ˜ í•­ëª© 100% | 3ê°œ (ë°©í–¥, ì˜¤ë§¤í•‘, Alias) | âœ… ì‹ ê·œ ì¶”ê°€ ì™„ë£Œ |
| **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸** | P95 ì¸¡ì • | ë¯¸êµ¬í˜„ | âŒ ëˆ„ë½ |
| **ì—ëŸ¬ ì¼€ì´ìŠ¤** | 10+ ì¼€ì´ìŠ¤ | ~5ê°œ | âš ï¸ ë¶€ì¡± |

---

### 6.3 ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬

#### í˜„ì¬ ì„±ëŠ¥ (ì¸¡ì •ê°’)

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸
pytest tests/ -v
==== 51 passed in 226.38s ====

# ë¶„ì„
- í‰ê· : 226.38 / 51 = 4.43ì´ˆ/ì¼€ì´ìŠ¤
- P95 ì¶”ì •: 6~7ì´ˆ/ì¼€ì´ìŠ¤
```

#### ì„±ëŠ¥ ë³‘ëª© ë¶„ì„

| ë‹¨ê³„ | ì˜ˆìƒ ì†Œìš” ì‹œê°„ | ë¹„ìœ¨ | ê°œì„  ë°©ì•ˆ |
|:-----|:-------------|:----:|:---------|
| ì›Œí¬ë¶ ë¡œë“œ | 2~3ì´ˆ | 50% | ìºì‹± (1íšŒë§Œ ë¡œë“œ) |
| PERCENTAGE ìŠ¤ìº” | 1~2ì´ˆ | 30% | ì¸ë±ì‹± |
| í¼ì§€ ë§¤ì¹­ | 0.5~1ì´ˆ | 15% | ìš°ì„ ìˆœìœ„ ë‚®ì¶¤ |
| ê³„ì‚° ë¡œì§ | 0.1~0.2ì´ˆ | 5% | ìµœì í™” ë¶ˆí•„ìš” |

#### ì„±ëŠ¥ ëª©í‘œ (ê°œì„  í›„)

| ì‹œë‚˜ë¦¬ì˜¤ | í˜„ì¬ | ëª©í‘œ | ê°œì„ ì•ˆ |
|:---------|:----:|:----:|:------|
| **ì´ˆê¸° ë¡œë“œ** (ì›Œí¬ë¶ ë¡œë“œ í¬í•¨) | 4~5ì´ˆ | < 10ì´ˆ | 1íšŒë§Œ í—ˆìš© |
| **ë‹¨ì¼ ì˜ˆì¸¡** (ìºì‹œ ì ìš©) | 1~2ì´ˆ | < 1ì´ˆ | ì›Œí¬ë¶ ìºì‹± + INDEX ì¸ë±ì‹± |
| **ë°°ì¹˜ ì˜ˆì¸¡** (200ëª…) | 800ì´ˆ | < 300ì´ˆ | ë³‘ë ¬ ì²˜ë¦¬ + ìºì‹± |
| **API P95** (í”„ë¡œë•ì…˜) | 6~7ì´ˆ | < 3ì´ˆ | ìƒê¸° ê°œì„ ì•ˆ ì¢…í•© |

---

## 7. ê°œì„ ëœ ë¹„ê¸°ëŠ¥ ëª…ì„¸ (Theory Engine ì „ìš©)

### 7.1 ì„±ëŠ¥ (Performance)

| NFR ID | í•­ëª© | ìš”êµ¬ì‚¬í•­ | í˜„ì¬ ìƒíƒœ | ê°­ |
|:-------|:-----|:---------|:---------|:---|
| `NFR-TE-P01` | ë‹¨ì¼ ì˜ˆì¸¡ (ìºì‹œ ì ìš©) | < 1ì´ˆ | 1~2ì´ˆ | âš ï¸ ê°œì„  í•„ìš” |
| `NFR-TE-P02` | ë‹¨ì¼ ì˜ˆì¸¡ (ìºì‹œ ë¯¸ì ìš©) | < 5ì´ˆ | 4~5ì´ˆ | âœ… ê·¼ì ‘ |
| `NFR-TE-P03` | ë°°ì¹˜ ì˜ˆì¸¡ (200ëª…) | < 300ì´ˆ | ~800ì´ˆ | âŒ ê°œì„  í•„ìš” |
| `NFR-TE-P04` | ì›Œí¬ë¶ ë¡œë“œ | < 10ì´ˆ | 2~3ì´ˆ | âœ… ë‹¬ì„± |
| `NFR-TE-P05` | ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ | < 500MB | ~300MB | âœ… ë‹¬ì„± |

---

### 7.2 ì •í™•ë„ (Accuracy)

| NFR ID | í•­ëª© | ìš”êµ¬ì‚¬í•­ | ê²€ì¦ ë°©ë²• | ìš°ì„ ìˆœìœ„ |
|:-------|:-----|:---------|:---------|:--------:|
| `NFR-TE-A01` | ì ìˆ˜ ë³€í™˜ ì •í™•ë„ | 95% (Â±5%) | ê³¨ë“  ì¼€ì´ìŠ¤ ëŒ€ì¡° | P0 |
| `NFR-TE-A02` | ì»¤íŠ¸ë¼ì¸ ì¡°íšŒ ì •í™•ë„ | 90% (Â±5ì ) | ì‹¤ì œ í•©ê²©ì„  ëŒ€ì¡° | P0 |
| `NFR-TE-A03` | ë¼ì¸ ë¶„ë¥˜ ì •í™•ë„ | 85% | ì‹¤ì œ í•©ê²© ê²°ê³¼ ëŒ€ì¡° | P0 |
| `NFR-TE-A04` | í™•ë¥  ì¶”ì • ì •í™•ë„ | Â±10% ì˜¤ì°¨ | ì‹¤ì œ í•©ê²©ë¥  ëŒ€ì¡° | P0 |
| `NFR-TE-A05` | Alias ë§¤ì¹­ ì •í™•ë„ | 95% | ìˆ˜ë™ ê²€ì¦ | P0 |
| `NFR-TE-A06` | í¼ì§€ ë§¤ì¹­ ì •í™•ë„ | 70% (threshold=75) | ìˆ˜ë™ ê²€ì¦ | P1 |
| `NFR-TE-A07` | ê²°ê²© ê²€ì¶œ ì •í™•ë„ | 100% (ê²°ê²©=ì •í™•) | ë£° ê²€ì¦ | P0 |

---

### 7.3 ì„¤ëª… ê°€ëŠ¥ì„± (Explainability)

| NFR ID | í•­ëª© | ìš”êµ¬ì‚¬í•­ | í˜„ì¬ ìƒíƒœ | ê°­ |
|:-------|:-----|:---------|:---------|:---|
| `NFR-TE-E01` | ë§¤ì¹­ ë°©ë²• ì¶”ì  | ê²°ê³¼ì— ë§¤ì¹­ ë°©ë²• í¬í•¨ (exact/alias/fuzzy) | âŒ ì—†ìŒ | ğŸŸ¡ **High** |
| `NFR-TE-E02` | Alias ì‚¬ìš© í”Œë˜ê·¸ | used_alias, alias_chain ì €ì¥ | âŒ ì—†ìŒ | ğŸŸ¡ **High** |
| `NFR-TE-E03` | í¼ì§€ ë§¤ì¹­ ìŠ¤ì½”ì–´ | í¼ì§€ ë§¤ì¹­ ì‹œ similarity score ì €ì¥ | âŒ ì—†ìŒ | ğŸŸ¢ **Medium** |
| `NFR-TE-E04` | ë³´ê°„ ì—¬ë¶€ í”Œë˜ê·¸ | PERCENTAGE ë³´ê°„ ë°œìƒ ì‹œ í”Œë˜ê·¸ | âŒ ì—†ìŒ | ğŸŸ¢ **Medium** |
| `NFR-TE-E05` | raw_components ì™„ì „ì„± | ëª¨ë“  ì¤‘ê°„ ê³„ì‚° ì €ì¥ | âœ… ìˆìŒ | âœ… ë‹¬ì„± |
| `NFR-TE-E06` | ë²„ì „ ì¶”ì  | engine_version + excel_version | âœ… ìˆìŒ | âœ… ë‹¬ì„± |

#### ê°œì„ ì•ˆ: Explainability í•„ë“œ ì¶”ê°€

```python
@dataclass
class TheoryResult:
    # ê¸°ì¡´ í•„ë“œ
    line: AdmissionLine
    probability: float
    score_theory: float
    cutoffs: dict
    raw_components: dict
    engine_version: str
    excel_version: str
    
    # ì‹ ê·œ: ì„¤ëª… ê°€ëŠ¥ì„± í•„ë“œ
    explainability: ExplainabilityInfo

@dataclass
class ExplainabilityInfo:
    # ëŒ€í•™ ë§¤ì¹­
    university_mapping: MappingInfo
    
    # ì „ê³µ ë§¤ì¹­
    major_mapping: MappingInfo
    
    # ì»¤íŠ¸ë¼ì¸ ì†ŒìŠ¤
    cutoff_source: CutoffSource
    
    # ê²°ê²© íŠ¸ë¦¬ê±°
    disqualification_details: List[DisqualificationDetail]

@dataclass
class MappingInfo:
    input: str
    matched: str
    method: Literal['exact', 'alias', 'fuzzy', 'failed']
    confidence: float  # 0-1
    metadata: dict  # fuzzy_score, alias_chain ë“±

@dataclass
class CutoffSource:
    sheet: Literal['INDEX', 'PERCENTAGE']
    column_name: str
    percentile: Optional[int]
    interpolated: bool
    interpolation_method: Optional[str]
```

---

### 7.4 ë°ì´í„° í’ˆì§ˆ (Data Quality)

| NFR ID | í•­ëª© | ìš”êµ¬ì‚¬í•­ | ê²€ì¦ ë°©ë²• | ìš°ì„ ìˆœìœ„ |
|:-------|:-----|:---------|:---------|:--------:|
| `NFR-TE-DQ01` | ì‹œíŠ¸ ì¡´ì¬ ê²€ì¦ | INDEX, PERCENTAGE, RAWSCORE í•„ìˆ˜ | validate_sheets() | P0 |
| `NFR-TE-DQ02` | ì»¬ëŸ¼ ì¡´ì¬ ê²€ì¦ | í•„ìˆ˜ ì»¬ëŸ¼ 100% ì¡´ì¬ | validate_columns() | P0 |
| `NFR-TE-DQ03` | NULL ì²˜ë¦¬ | NULL ë°œê²¬ ì‹œ ê²½ê³  ë¡œê·¸ | ë¡œê·¸ ê²€í†  | P1 |
| `NFR-TE-DQ04` | ì¤‘ë³µ ì œê±° | ì¤‘ë³µ ë°ì´í„° ìë™ ì œê±° | ë¡œê·¸ ê²€í†  | P1 |
| `NFR-TE-DQ05` | íƒ€ì… ë³€í™˜ | cast_numeric() ì•ˆì „ ë³€í™˜ | íƒ€ì… ì—ëŸ¬ 0ê±´ | P0 |
| `NFR-TE-DQ06` | ë²”ìœ„ ê²€ì¦ | ì ìˆ˜ 0~100, % 0~100 | ë²”ìœ„ ì—ëŸ¬ 0ê±´ | P1 |

---

## 8. ì¦‰ì‹œ ì‹¤í–‰ ê¶Œì¥ì‚¬í•­ (Action Items)

### P0 (ì¦‰ì‹œ, 2~4ì‹œê°„)

| í•­ëª© | í˜„ì¬ ìƒíƒœ | ëª©í‘œ | ì˜ˆìƒ ì†Œìš” |
|:-----|:---------|:-----|:---------|
| **ê²°ê²© ë£° ëŒ€í•™ëª… ì •ê·œí™”** | âŒ ë¯¸ì ìš© | âœ… ì ìš© | 1ì‹œê°„ |
| **ì˜ë£Œê³„ì—´ íŒì • í‚¤ì›Œë“œ ì •êµí™”** | âš ï¸ ê³¼ë„í•¨ | âœ… ëª…ì‹œì  í‚¤ì›Œë“œë§Œ | 1ì‹œê°„ |
| **Explainability í•„ë“œ ì¶”ê°€** | âŒ ì—†ìŒ | âœ… ê¸°ë³¸ í•„ë“œ ì¶”ê°€ | 2ì‹œê°„ |

**ì½”ë“œ ìˆ˜ì • ìœ„ì¹˜**:
```python
# 1. rules.py - check_disqualification()
def check_disqualification(profile, rules):
    # âœ… ì¶”ê°€: ëŒ€í•™ëª… ì •ê·œí™”
    profile.target.university = resolve_university_alias(
        profile.target.university
    )
    # (ê¸°ì¡´ ë¡œì§)

# 2. rules.py - _is_medical_major()
def _is_medical_major(major: str) -> bool:
    # âœ… ìˆ˜ì •: ëª…ì‹œì  í‚¤ì›Œë“œ
    MEDICAL_KEYWORDS = ['ì˜í•™', 'ì˜ì˜ˆ', 'ì•½í•™', 'ì¹˜ì˜í•™', ...]
    normalized = _normalize_major(major)
    return any(normalized == kw or normalized.startswith(kw) 
               for kw in MEDICAL_KEYWORDS)

# 3. model.py - TheoryResult
@dataclass
class TheoryResult:
    # (ê¸°ì¡´ í•„ë“œ)
    explainability: ExplainabilityInfo = None  # âœ… ì¶”ê°€
```

---

### P1 (1~2ì¼)

| í•­ëª© | í˜„ì¬ ìƒíƒœ | ëª©í‘œ | ì˜ˆìƒ ì†Œìš” |
|:-----|:---------|:-----|:---------|
| **Golden Case 10ê°œ í™•ì¥** | 7ê°œ | 10+ ê°œ | 4ì‹œê°„ |
| **ì›Œí¬ë¶ ìºì‹± êµ¬í˜„** | âŒ ì—†ìŒ | âœ… lru_cache | 2ì‹œê°„ |
| **INDEX ì¸ë©”ëª¨ë¦¬ ì¸ë±ì‹±** | âŒ ì—†ìŒ | âœ… dict ì¸ë±ìŠ¤ | 4ì‹œê°„ |
| **ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ í…ŒìŠ¤íŠ¸** | âŒ ì—†ìŒ | âœ… pytest-benchmark | 2ì‹œê°„ |

---

### P2 (1ì£¼ ì´ë‚´)

| í•­ëª© | í˜„ì¬ ìƒíƒœ | ëª©í‘œ | ì˜ˆìƒ ì†Œìš” |
|:-----|:---------|:-----|:---------|
| **ì—ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ 10+ê°œ** | 5ê°œ | 10+ ê°œ | 4ì‹œê°„ |
| **ë³‘ë ¬ ì²˜ë¦¬ (ë°°ì¹˜ ì˜ˆì¸¡)** | âŒ ì—†ìŒ | âœ… multiprocessing | 1ì¼ |
| **ë¡œê·¸ ë ˆë²¨ ì¡°ì •** | âš ï¸ ê³¼ë‹¤ | âœ… INFO ê¸°ë³¸ | 2ì‹œê°„ |

---

## 9. ìµœì¢… ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸ (ì—”ì§„ êµ¬ì¶• ì™„ë£Œ ê¸°ì¤€)

### 9.1 ê¸°ëŠ¥ ê²€ì¦

- [x] **TE-F01**: RAWSCORE ë³€í™˜ (85% ì»¤ë²„ë¦¬ì§€, 95% ì •í™•ë„)
- [x] **TE-F02**: INDEX ì¡°íšŒ (90% ì»¤ë²„ë¦¬ì§€, 90% ì •í™•ë„)
- [x] **TE-F03**: PERCENTAGE ì •ê·œí™” (90% ì»¤ë²„ë¦¬ì§€, 90% ì •í™•ë„)
  - [x] ì¶• ë°©í–¥ ê²€ì¦ (0=ìƒìœ„, 100=í•˜ìœ„) âœ…
  - [x] ì»¤íŠ¸ë¼ì¸ ë§¤í•‘ ê²€ì¦ (ì ì •â‰¥ì˜ˆìƒâ‰¥ì†Œì‹ ) âœ…
- [x] **TE-F04**: RESTRICT ê²°ê²© ì²´í¬ (85% ì»¤ë²„ë¦¬ì§€, 100% ì •í™•ë„)
  - [ ] ëŒ€í•™ëª… ì •ê·œí™” ì ìš© âš ï¸ P0
  - [ ] ì˜ë£Œê³„ì—´ í‚¤ì›Œë“œ ì •êµí™” âš ï¸ P0
- [x] **TE-F05**: COMPUTE ìµœì¢… ê³„ì‚° (100% ì»¤ë²„ë¦¬ì§€, 85% ì •í™•ë„)
- [x] **TE-F06**: ëŒ€í•™ Alias í•´ì†Œ (80% ì»¤ë²„ë¦¬ì§€, 95% ì •í™•ë„)
  - [x] ì—­ë§¤í•‘ í‚¤ ì •ê·œí™” âœ…
  - [x] ì˜¤ë§¤í•‘ ë°©ì§€ âœ…
- [x] **TE-F07**: ì „ê³µ Alias í•´ì†Œ (75% ì»¤ë²„ë¦¬ì§€, 90% ì •í™•ë„)
  - [x] ì˜ì˜ˆâ†’ì˜í•™ ë§¤í•‘ âœ…
  - [x] ìš°ì„ ìˆœìœ„ ì ìš© âœ…
- [x] **TE-F08**: í¼ì§€ ë§¤ì¹­ (15% ì»¤ë²„ë¦¬ì§€, 70% ì •í™•ë„)
- [x] **TE-F09**: ë²„ì „ ì¶”ì  (100%)
- [x] **TE-F10**: raw_components ë¡œê¹… (100%)
- [ ] **TE-F11**: Explainability í”Œë˜ê·¸ (0% â†’ 100% ëª©í‘œ) âš ï¸ P0

---

### 9.2 ë¹„ê¸°ëŠ¥ ê²€ì¦

#### ì„±ëŠ¥
- [ ] ë‹¨ì¼ ì˜ˆì¸¡ < 1ì´ˆ (ìºì‹œ) âš ï¸ ê°œì„  í•„ìš”
- [x] ë‹¨ì¼ ì˜ˆì¸¡ < 5ì´ˆ (ìºì‹œ ì—†ìŒ) âœ…
- [ ] ë°°ì¹˜ ì˜ˆì¸¡ < 300ì´ˆ (200ëª…) âŒ ê°œì„  í•„ìš”
- [x] ì›Œí¬ë¶ ë¡œë“œ < 10ì´ˆ âœ…

#### ì •í™•ë„
- [x] í•©ê²© ì˜ˆì¸¡ ì •í™•ë„ 85%+ (ëª©í‘œ, ë°±í…ŒìŠ¤íŠ¸ í•„ìš”)
- [x] ì»¤íŠ¸ë¼ì¸ ë°©í–¥ ê²€ì¦ 100% âœ…
- [x] Alias ë§¤ì¹­ 95%+ âœ…
- [ ] í¼ì§€ ë§¤ì¹­ 70%+ (ìˆ˜ë™ ê²€ì¦ í•„ìš”)

#### ì„¤ëª… ê°€ëŠ¥ì„±
- [x] raw_components ì €ì¥ âœ…
- [x] ë²„ì „ ì¶”ì  âœ…
- [ ] ë§¤ì¹­ í”Œë˜ê·¸ âš ï¸ P0
- [ ] ë³´ê°„ í”Œë˜ê·¸ âš ï¸ P1

#### í…ŒìŠ¤íŠ¸
- [x] ì „ì²´ í…ŒìŠ¤íŠ¸ 100% pass (51/51) âœ…
- [x] Sanity í…ŒìŠ¤íŠ¸ 3ê°œ ì¶”ê°€ âœ…
- [ ] Golden Case 10ê°œ í™•ì¥ (í˜„ì¬ 7ê°œ) âš ï¸ P1
- [ ] ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ í…ŒìŠ¤íŠ¸ âŒ P1

---

## 10. ëª…ì„¸ vs êµ¬í˜„ ê°­ ìµœì¢… ìš”ì•½

### 10.1 ê°­ íƒ€ì…ë³„ ë¶„ë¥˜

| ê°­ íƒ€ì… | ê°œìˆ˜ | ì‹¬ê°ë„ | ì¡°ì¹˜ |
|:--------|:----:|:------:|:-----|
| **ì˜ë¯¸ë¡  ê°­** (Semantic) | 2 | ğŸ”´ Critical | âœ… ìˆ˜ì • ì™„ë£Œ |
| **ë¡œì§ ê°­** (Logic) | 3 | ğŸ”´ Critical | âœ… ìˆ˜ì • ì™„ë£Œ |
| **ì„¤ëª…ê°€ëŠ¥ì„± ê°­** (Explainability) | 1 | ğŸŸ¡ High | âš ï¸ P0 ì‘ì—… í•„ìš” |
| **ì„±ëŠ¥ ê°­** (Performance) | 2 | ğŸŸ¡ High | âš ï¸ P1 ì‘ì—… í•„ìš” |
| **ë„ë©”ì¸ ê°­** (Domain) | 1 | ğŸŸ¡ High | âš ï¸ P0 ì‘ì—… í•„ìš” |

### 10.2 ëª…ì„¸ ê°œì„  ìš°ì„ ìˆœìœ„

| ìš°ì„ ìˆœìœ„ | ëª…ì„¸ í•­ëª© | í˜„ì¬ | ëª©í‘œ | ì˜ˆìƒ ì†Œìš” |
|:--------:|:---------|:----:|:----:|:---------|
| **P0** | PERCENTAGE ì¶• ë°©í–¥ ëª…ì‹œ | âŒ | âœ… | 0.5ì‹œê°„ (ë¬¸ì„œ) |
| **P0** | ì»¤íŠ¸ë¼ì¸ ë ˆë²¨ ë§¤í•‘ ê·œì¹™ | âŒ | âœ… | 0.5ì‹œê°„ (ë¬¸ì„œ) |
| **P0** | Alias ë§¤ì¹­ ìš°ì„ ìˆœìœ„ | âŒ | âœ… | 1ì‹œê°„ (ë¬¸ì„œ) |
| **P0** | Explainability í•„ë“œ ì •ì˜ | âŒ | âœ… | 2ì‹œê°„ (ë¬¸ì„œ+ì½”ë“œ) |
| **P1** | ì„±ëŠ¥ ëª©í‘œ í˜„ì‹¤í™” | âš ï¸ | âœ… | 1ì‹œê°„ (ë¬¸ì„œ) |
| **P1** | Golden Case 10ê°œ | 7ê°œ | 10+ | 4ì‹œê°„ (í…ŒìŠ¤íŠ¸) |
| **P2** | ì—ëŸ¬ ì¼€ì´ìŠ¤ í™•ì¥ | 5ê°œ | 10+ | 4ì‹œê°„ (í…ŒìŠ¤íŠ¸) |

---

## 11. ê²°ë¡  ë° ê¶Œì¥ì‚¬í•­

### 11.1 ê°­ ë¶„ì„ ê²°ë¡ 

**ê¸°ì¡´ ëª…ì„¸ì˜ ë¬¸ì œ**:
1. **ì¶”ìƒì  ê°œë… ìˆ˜ì¤€**: 5ë‹¨ê³„ íŒŒì´í”„ë¼ì¸ "ê°œë…"ë§Œ ì œì‹œ, êµ¬í˜„ ë””í…Œì¼ 80% ëˆ„ë½
2. **ì˜ë¯¸ë¡ ì  í•¨ì •**: PERCENTAGE ì¶• ë°©í–¥ ê°™ì€ ë°ì´í„° ì˜ë¯¸ë¥¼ ëª…ì„¸ ëˆ„ë½ â†’ ì¹˜ëª…ì  ë²„ê·¸ ìœ ë°œ
3. **ì„¤ëª… ê°€ëŠ¥ì„± ë¶€ì¡±**: "ê·¼ê±° ì œì‹œ"ë¼ê³ ë§Œ í•˜ê³  **ì–´ë–¤ í•„ë“œì— ì–´ë–»ê²Œ** ì €ì¥í• ì§€ ë¯¸ëª…ì‹œ
4. **ì„±ëŠ¥ ëª©í‘œ ë¹„í˜„ì‹¤ì **: ìºì‹±/ì¸ë±ì‹± ì—†ì´ P95 < 3ì´ˆëŠ” ë‹¬ì„± ë¶ˆê°€

**ì‹¤ì œ êµ¬í˜„ì˜ ê°•ì **:
1. **ì™„ì „í•œ íŒŒì´í”„ë¼ì¸**: 5ë‹¨ê³„ ëª¨ë‘ êµ¬í˜„ ì™„ë£Œ, í…ŒìŠ¤íŠ¸ 51ê°œ 100% pass
2. **ë²„ê·¸ ë°œê²¬ ë° ìˆ˜ì •**: ì¹˜ëª…ì  ê°­ 2ê°œ (PERCENTAGE ë°©í–¥, Alias ì˜¤ë§¤í•‘) ë°œê²¬ ì¦‰ì‹œ ìˆ˜ì •
3. **ë””ë²„ê¹… ì¸í”„ë¼**: raw_components, ë²„ì „ ì¶”ì  ë“± ì¶”ì  ê°€ëŠ¥ì„± í™•ë³´

**ê¶Œì¥ì‚¬í•­**:
1. **ëª…ì„¸ ì—…ë°ì´íŠ¸ í•„ìˆ˜**: ì‹¤ì œ êµ¬í˜„ ê¸°ë°˜ìœ¼ë¡œ ëª…ì„¸ ì „ë©´ ê°œì • (ë³¸ ë¬¸ì„œ ë°˜ì˜)
2. **Explainability ìš°ì„ **: ì„¤ëª… ê°€ëŠ¥ì„± í•„ë“œ ì¶”ê°€ (P0, 2ì‹œê°„)
3. **ì„±ëŠ¥ ê°œì„ **: ì›Œí¬ë¶ ìºì‹± + INDEX ì¸ë±ì‹± (P1, 1ì¼)
4. **í…ŒìŠ¤íŠ¸ í™•ì¥**: Golden Case 10ê°œ, ì—ëŸ¬ ì¼€ì´ìŠ¤ 10ê°œ (P1, 1ì¼)

---

## ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ì‘ì„±ì | ë³€ê²½ ë‚´ìš© |
|:----:|:----:|:------:|:---------|
| 1.0 | 2026-01-21 | Product Spec Agent | ì´ˆì•ˆ ì‘ì„± - ëª…ì„¸ vs êµ¬í˜„ ê°­ ë¶„ì„ |

---

**ë¬¸ì„œ ë**
